<?xml version="1.0" encoding="UTF-8"?>

  <web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
           http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
 <display-name>leasing4.5</display-name>
 <context-param>    
        <param-name>webAppRootKey</param-name>    
        <param-value>webapp.root</param-value>
 </context-param>
<!--上下文参数-->
   <!--国际化资源文件-->
    <context-param>
  		<param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
  		<param-value>ApplicationResources</param-value>
    </context-param>
   <!--日志配置-->
  
  
    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/classes/log4j.xml</param-value>
    </context-param>
    <!--spring配置文件applicationContenxt-->
     <context-param>
     	<description>配置文件位置</description>
     	<param-name>contextConfigLocation</param-name>
     	<param-value>classpath:applicationContext*.xml</param-value>
     </context-param>
     <!--quartz定时调度 -->
	   <context-param>
	       <param-name>quartz-config-file</param-name>
	       <param-value>quartz.properties</param-value>
	   </context-param>
	   <context-param>
	       <param-name>start-scheduler-on-load</param-name>
	       <param-value>true</param-value>
	   </context-param>
	   <context-param>
	       <param-name>start-delay-seconds</param-name>
	       <param-value>0</param-value>
	   </context-param>
	   <context-param>
	       <param-name>shutdown-on-unload</param-name>
	       <param-value>true</param-value>
	   </context-param>
	    <context-param>
	       <param-name>servlet-context-factory-key</param-name>
	       <param-value>org.quartz.impl.StdSchedulerFactory.KEY</param-value>
	   </context-param>
<!--注册监听器-->
     <!--加载spring的上下文-->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <!--加载spring在线人数-->
    <listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>
    <!--加载springlog4j的上下文-->
     <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
    <!--初始化信息-->
     <listener>
     	<listener-class>com.kernal.web.listener.InitializeListener</listener-class>
     </listener>
    <!--quartz定时调度
     <listener>
     	<listener-class>org.quartz.ee.servlet.QuartzInitializerListener</listener-class>
     </listener>
    --> 
    <!--清除上传文件的临时目录-->
    <listener>
		<listener-class>org.apache.commons.fileupload.servlet.FileCleanerCleanup</listener-class>
	</listener>
    <!--hibernate延迟加载-->	 
	  <filter>  
                <filter-name>OpenSessionInViewFilter</filter-name>  
                <filter-class>  
                         org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
                </filter-class>  
                 
                <init-param>  
                        <param-name>singleSession</param-name>  
                        <param-value>true</param-value>  
                </init-param>  
       </filter>
       <filter-mapping>  
                <filter-name>OpenSessionInViewFilter</filter-name>  
                <url-pattern>/*</url-pattern>  
       </filter-mapping> 
    <!--注册过滤器器-->
    <!--编码设置-->
    <filter>
         <filter-name>encodingFilter</filter-name>
         <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
         <init-param>
             <param-name>encoding</param-name>
             <param-value>utf-8</param-value>
        </init-param>
     </filter>
     <filter-mapping>
         <filter-name>encodingFilter</filter-name>
         <url-pattern>/*</url-pattern>
     </filter-mapping>
     <!--spring sercurity --> 
    <filter>  
        <filter-name>springSecurityFilterChain</filter-name>  
        <filter-class>  
            org.springframework.web.filter.DelegatingFilterProxy   
        </filter-class>  
    </filter>
    <filter-mapping>  
        <filter-name>springSecurityFilterChain</filter-name>  
        <url-pattern>/*</url-pattern>  
    </filter-mapping>
    <!-- Shiro filter
    <filter>
        <filter-name>shiroFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>targetFilterLifecycle</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>shiroFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    -->
    <!--配置装饰器-->
      <!--  filter>
	    <filter-name>sitemesh</filter-name>
	    <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
	  </filter>
	  <filter-mapping>
	    <filter-name>sitemesh</filter-name>
	    <url-pattern>/decoratorPages/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
	  </filter-mapping-->
<!--注册servlet-->
     <!--Quartz定时调度加载-->
     <!--  
     <servlet>
            <description>Quartz Initializer Servlet</description>
            <servlet-name>QuartzInitializer</servlet-name>
            <servlet-class>org.quartz.ee.servlet.QuartzInitializerServlet</servlet-class>
            <init-param>
                <param-name>config-file</param-name>
                <param-value>quartz.properties</param-value>
            </init-param>
            <init-param>
                <param-name>start-scheduler-on-load</param-name>
                <param-value>true</param-value>
            </init-param>
            <init-param>
                <param-name>start-delay-seconds</param-name>
                <param-value>0</param-value>
            </init-param>
            <init-param>
                <param-name>shutdown-on-unload</param-name>
                <param-value>true</param-value>
            </init-param>
            <load-on-startup>1</load-on-startup>
        </servlet> 
        -->
     <!--springMVC设置-->
    <servlet>
         <description>Spring MVC Servlet</description>
         <servlet-name>springmvc</servlet-name>
         <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
         <init-param>
         	<param-name>contextConfigLocation</param-name>
         	<param-value>classpath:springmvc-servlet.xml</param-value>
         </init-param>
         <load-on-startup>2</load-on-startup>
     </servlet>
     <!--设置html中form表单只支持GET与POST请求，而DELETE、PUT等method并不支持，spring3.0添加了一个过滤器，可以将这些请求转换为标准的http方法，使得支持GET、POST、PUT与DELETE请求
    <filter>
        <filter-name>HiddenHttpMethodFilter</filter-name>
        <filter-class>
            org.springframework.web.filter.HiddenHttpMethodFilter
        </filter-class>
    </filter>
    <filter-mapping>
        <filter-name>HiddenHttpMethodFilter</filter-name>
        <servlet-name>springmvc</servlet-name>
    </filter-mapping>
    -->
     <!--行为拦截器-->
     <servlet-mapping>
	     <servlet-name>springmvc</servlet-name>
	     <url-pattern>*.bi</url-pattern>
	 </servlet-mapping>
	 <servlet-mapping>
	     <servlet-name>springmvc</servlet-name>
	     <url-pattern>*.acl</url-pattern>
	 </servlet-mapping>
	 <servlet-mapping>
	     <servlet-name>springmvc</servlet-name>
	     <url-pattern>*.action</url-pattern>
	 </servlet-mapping>
	 <!-- webservices -->
    <servlet>  
        <servlet-name>CXFServlet</servlet-name>  
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>  
        <load-on-startup>3</load-on-startup>  
    </servlet>  
    <servlet-mapping>  
        <servlet-name>CXFServlet</servlet-name>  
        <url-pattern>/webServices/*</url-pattern>  
    </servlet-mapping> 
   <!--jsp页面标签-->
    <jsp-config>
            <taglib>
			      <taglib-uri>/WEB-INF/tlds/spring.tld</taglib-uri>
				  <taglib-location>/WEB-INF/tlds/spring.tld</taglib-location>
			 </taglib>
			 <taglib>
				  <taglib-uri>/WEB-INF/tlds/security.tld</taglib-uri>
				  <taglib-location>/WEB-INF/tlds/security.tld</taglib-location>
			 </taglib>
		   <taglib>
		        <taglib-uri>/WEB-INF/tlds/c.tld</taglib-uri>
		        <taglib-location>/WEB-INF/tlds/c.tld</taglib-location>
	       </taglib>
		   <taglib>
		        <taglib-uri>/WEB-INF/tlds/fn.tld</taglib-uri>
		        <taglib-location>/WEB-INF/tlds/fn.tld</taglib-location>
	       </taglib>
          <taglib>
	           <taglib-uri>/WEB-INF/tlds/fmt.tld</taglib-uri>
	           <taglib-location>/WEB-INF/tlds/fmt.tld</taglib-location>
          </taglib>    		  
          <taglib>
	           <taglib-uri>/WEB-INF/tlds/permission.tld</taglib-uri>
	           <taglib-location>/WEB-INF/tlds/permission.tld</taglib-location>
          </taglib>    		  
    </jsp-config>
    <mime-mapping>
        <extension>png</extension>
        <mime-type>image/png</mime-type>
    </mime-mapping>
    <session-config>
        <session-timeout>240</session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>
    <error-page>
       <error-code>404</error-code>
       <location>/errorPages/error404.bi</location>
    </error-page>
    <error-page>
       <error-code>400</error-code>
       <location>/errorPages/error400.bi</location>
    </error-page>
    <error-page>
       <error-code>500</error-code>
       <location>/errorPages/error500.bi</location>
    </error-page>
    <!--负载均衡配置seesion同步
	<distributable />
	-->
</web-app>