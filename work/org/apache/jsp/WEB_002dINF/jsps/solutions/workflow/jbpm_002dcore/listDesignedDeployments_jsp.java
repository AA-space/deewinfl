package org.apache.jsp.WEB_002dINF.jsps.solutions.workflow.jbpm_002dcore;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class listDesignedDeployments_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.List<java.lang.String> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.List<java.lang.String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\n");
      out.write("<html>\n");
      out.write("<head>\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n");
      out.write("<title>流程部署</title>\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/tracywindy/tracywindy.css\" rel=\"stylesheet\" type=\"text/css\"/>\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/tracywindy/button.css\" rel=\"stylesheet\" type=\"text/css\"/>\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/jquery-easyui/easyui.css\" rel=\"stylesheet\" type=\"text/css\">\n");
      out.write("<link href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/jquery-easyui/icon.css\" rel=\"stylesheet\" type=\"text/css\">\n");
      out.write("<style type=\"text/css\">\n");
      out.write("   html,body{overflow:hidden;}\n");
      out.write("   td.td-label{\n");
      out.write("     font-weight:BOLD;\n");
      out.write("     width:200px;\n");
      out.write("     padding-left:20px;\n");
      out.write("   }\n");
      out.write("   td.td-input input{\n");
      out.write("      border:1px solid silver;\n");
      out.write("      width:200px;\n");
      out.write("   }\n");
      out.write("   td.td-input select{\n");
      out.write("      border:1px solid silver;\n");
      out.write("      width:124px;\n");
      out.write("   }\n");
      out.write("   input[name='isNeedAdvise']{\n");
      out.write("      position:relative;\n");
      out.write("      top:2px;\n");
      out.write("   }\n");
      out.write("   .td-content-readonly {\n");
      out.write("    background: #F6F6F6;\n");
      out.write("    border: 1px solid silver;\n");
      out.write("    height:16px;\n");
      out.write("   }\n");
      out.write("   #workflow_activity_setting_tabs .tabs li{\n");
      out.write("      padding-left:10px;\n");
      out.write("      padding-right:10px;\n");
      out.write("   }\n");
      out.write("   #workflow_activity_setting_tabs .tabs li a.tabs-inner{\n");
      out.write("      padding-left:10px;\n");
      out.write("      padding-right:10px;\n");
      out.write("   }\n");
      out.write("  \n");
      out.write("</style>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery/jquery.min.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery/jquery.easyui.min.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery/easyui-lang-zh_CN.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyUtils.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyJsonUtil.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyLoadMask.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyAjax.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyTable.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyComboBox.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/tracywindy/tracywindyCommonUserSelection.js\"></script>\n");
      out.write("<script type=\"text/javascript\">\n");
      out.write("\tvar all_width  = document.documentElement.clientWidth;\n");
      out.write("\tvar all_height = document.documentElement.clientHeight-2;\n");
      out.write("\t (function($){$(function(){\n");
      out.write("\t\t //加载流程类别\n");
      out.write("\t\t   new tracywindyComboBox({\n");
      out.write("               renderTo:'id_workflowTypeComboContainer',\n");
      out.write("               id:'id_workflowType_combo',\n");
      out.write("               width:191,\n");
      out.write("               isContainEmpty:false,\n");
      out.write("        \t   xmlFileName:'\\\\combos\\\\comboDict.xml',\n");
      out.write("     \t       loadMode:'ajax',\n");
      out.write("     \t       readOnly:true,\n");
      out.write("     \t       displayField:'name',\n");
      out.write("     \t       valueField:'code',\n");
      out.write("     \t       isForceModify:true,\n");
      out.write("     \t       params:{\n");
      out.write("                 pid:'root.workflowType'\n");
      out.write("     \t       },\n");
      out.write("     \t       onSelect:function(combo,rowData){}\n");
      out.write("\t\t\t  });  \n");
      out.write("\t\t\t//加载排序\n");
      out.write("\t\t\tvar comboMenuPosition = new tracywindyComboBox({\n");
      out.write("\t\t\t       dropListHeight:200,\n");
      out.write("\t\t\t       isContainEmpty:false,\n");
      out.write("\t\t\t       id:'id_comboMenuPosition',\n");
      out.write("\t\t\t       width:190,\n");
      out.write("\t\t\t       name:'currentPosition',\n");
      out.write("\t\t\t       renderTo:'id_menuPositionContainer',\n");
      out.write("\t\t\t       loadMode:'ajax',\n");
      out.write("\t\t\t       readOnly:false,\n");
      out.write("\t\t\t       xmlFileName:'\\\\combos\\\\comboWorkflowTypePosition.xml',\n");
      out.write("\t\t\t       displayField:'name',\n");
      out.write("\t\t\t       valueField:'name',\n");
      out.write("\t\t\t       isCheck:false,\n");
      out.write("\t\t\t       leftAdd:1,\n");
      out.write("\t\t\t       params:{},\n");
      out.write("\t\t\t       rawValue:'最后',\n");
      out.write("\t\t\t       onSelect:function(combo){\n");
      out.write("\t\t\t          var currentRawValue = combo.getRawValue();\n");
      out.write("\t\t\t          if((\"第一位\" == currentRawValue)||(\"最后\" == currentRawValue))\n");
      out.write("\t\t\t          {\n");
      out.write("\t\t\t\t          jQuery(\"#id_constantLabel\").hide();\n");
      out.write("\t\t\t\t      }\n");
      out.write("\t\t\t          else\n");
      out.write("\t\t\t          {\n");
      out.write("\t\t\t        \t  jQuery(\"#id_constantLabel\").show();\n");
      out.write("\t\t\t\t      }\n");
      out.write("\t\t\t       }\n");
      out.write("\t\t\t    });\n");
      out.write("     });})(jQuery);\n");
      out.write("</script>\n");
      out.write("</head>\n");
      out.write("<body>\n");
      out.write("    \t<div id=\"id_createNewWorkflowWindow\"  closed=\"true\" modal=\"true\" title=\"创建新流程\" style=\"display:none;width:500px;padding-top:10px;text-align:center;\">\n");
      out.write("\t        <center>\n");
      out.write("\t\t        <div style=\"width:95%;\">\n");
      out.write("\t\t\t        <table align=\"center\" style=\"width:90%\">\n");
      out.write("\t\t\t            <tr style='height:10px;'></tr>\n");
      out.write("\t\t\t            <tr><td class=\"input_label_desc\">流程分类:</td><td class=\"input_value\"><div  style=\"float:left;\" id=\"id_workflowTypeComboContainer\"></div><span class=\"content-required\">*</span></td></tr>\n");
      out.write("\t\t\t            <tr><td class=\"input_label_desc\">显示名称:</td><td class=\"input_value\"><input type=\"text\" id=\"id_displayName\"/><span class=\"content-required\">*</span></td></tr>\n");
      out.write("\t\t\t            <tr><td class=\"input_label_desc\">流程编号:</td><td class=\"input_value\"><input type=\"text\" id=\"id_worflowCode\"/><span class=\"content-required\">*</span></td></tr>\n");
      out.write("\t\t\t            <tr><td class=\"input_label_desc\">流程关键字:</td><td class=\"input_value\"><input type=\"text\" id=\"id_name\"/><span class=\"content-required\">*</span></td></tr>\n");
      out.write("\t\t\t            <tr><td class=\"input_label_desc\">版本号:</td><td class=\"input_value\"><input type=\"text\" id=\"id_version\"/><span class=\"content-required\">*</span></td></tr>\n");
      out.write("\t\t\t            <tr style=\"display:none;\"><td class=\"input_label_desc\">设计器版本:</td><td class=\"input_value\">\n");
      out.write("\t\t\t\t            <select id=\"id_jpdlVersion\" style=\"width:194px;\">\n");
      out.write("\t\t\t\t               <option value=\"4.4\" selected>jbpm4.4</option>\n");
      out.write("\t\t\t\t               <option value=\"4.3\">jbpm4.3</option>\n");
      out.write("\t\t\t\t            </select>\n");
      out.write("\t\t\t            <span class=\"content-required\">*</span></td></tr>\n");
      out.write("\t\t\t            <tr><td class=\"input_label_desc\">流程描述:</td><td class=\"input_value\"><input type=\"text\" id=\"id_description\"/><span class=\"content-required\">&nbsp;&nbsp;</span></td></tr>\n");
      out.write("\t\t\t            <tr><td colspan=3><div style=\"width:100%;height:5px;\">&nbsp;</div></td></tr>\n");
      out.write("\t\t\t            <tr><td colspan=3><div style=\"width:100%;border-top:1px solid #DDD;\"></div></td></tr>\n");
      out.write("\t\t\t            <tr><td colspan=3><div style=\"width:100%;height:5px;\">&nbsp;</div></td></tr>\n");
      out.write("\t\t\t            <tr><td  class=\"input_label_desc\" colspan=3><span style=\"float:left;margin-left:100px;\">排在&nbsp;&nbsp;</span><span style=\"float:left;\" id=\"id_menuPositionContainer\"></span><span style=\"float:left;\" id=\"id_constantLabel\">&nbsp;&nbsp;之后</span></td></tr>\n");
      out.write("\t\t\t            <tr class='content-separator'>\n");
      out.write("\t\t\t            <td colspan='2'>\n");
      out.write("\t\t\t\t\t        <a  style=\"margin-left:20px;\" href=\"javascript:void(0);\" class=\"btn btn-primary\"onclick=\"toCreateNewWorkflowPage();\"><span>确定</span></a>\n");
      out.write("\t\t\t\t\t        <a  style=\"margin-left:20px;\" href=\"javascript:void(0);\" class=\"btn btn-primary\" onclick='jQuery(\"#id_createNewWorkflowWindow\").window(\"close\");'><span>取消</span></a>\n");
      out.write("\t\t\t            </td>\n");
      out.write("\t\t\t            </tr>\n");
      out.write("\t\t\t        </table>\n");
      out.write("\t\t        </div>\n");
      out.write("\t        </center>\n");
      out.write("\t</div>\n");
      out.write("\t<form action=\"\" method=\"post\" id=\"id_workflow_form\">\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_id'          name=\"id\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_code'        name=\"code\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_type'        name=\"type\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_position'    name=\"position\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_queryText_id'         name=\"queryText\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_display_name'         name=\"display_name\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_name'        name=\"workflow_name\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_version'     name=\"workflow_version\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_jpdlVersion' name=\"workflow_jpdlVersion\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_description' name=\"workflow_description\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_isDeployed'  name=\"workflow_isDeployed\"/>\n");
      out.write("\t    <input type=\"hidden\" id='id_form_workflow_designerWorkflowJsonString'        name=\"workflow_designerWorkflowJsonString\"/>\n");
      out.write("\t</form>\n");
      out.write("    <div id=\"id_processDefinitionsContainer\"></div>\n");
      out.write("\t<div id=\"id_ajax_debug\" style=\"display: none;\"></div>\n");
      out.write("    <script type=\"text/javascript\" language=\"javascript\">\n");
      out.write("         var globalRowIndex = -1;\n");
      out.write("         var loadMask = null;//new tracywindyLoadMask(document.body,\"操作进行中，请稍等...\");\n");
      out.write("         function createNewWorkflow()\n");
      out.write("         {\n");
      out.write("        \tresetCreateNewWorkflowPage(); \n");
      out.write("     \t\tjQuery(\"#id_createNewWorkflowWindow\").show();\n");
      out.write("    \t\tjQuery(\"#id_createNewWorkflowWindow\").window({top:20,draggable:false});\n");
      out.write("        \tjQuery(\"#id_createNewWorkflowWindow\").window(\"open\");\n");
      out.write("         }\n");
      out.write("         function resetCreateNewWorkflowPage()\n");
      out.write("         {\n");
      out.write("     \t     $(\"#id_form_workflow_id\").val(\"\");\n");
      out.write("     \t     $(\"#id_form_display_name\").val(\"\");\n");
      out.write("     \t     $(\"#id_form_workflow_name\").val(\"\");\n");
      out.write("     \t     $(\"#id_form_workflow_type\").val(\"\");\n");
      out.write("     \t     $(\"#id_form_workflow_code\").val(\"\");\n");
      out.write("     \t     $(\"#id_form_workflow_position\").val(\"\");\n");
      out.write("    \t     $(\"#id_form_workflow_version\").val(\"\");\n");
      out.write("    \t     $(\"#id_form_workflow_jpdlVersion\").val(\"\");\n");
      out.write("    \t     $(\"#id_form_workflow_description\").val(\"\");\n");
      out.write("    \t     $(\"#id_form_workflow_designerWorkflowJsonString\").val(\"{}\");\n");
      out.write("    \t     $(\"#id_form_workflow_isDeployed\").val(\"\");\n");
      out.write("    \t    \n");
      out.write("        \t $(\"#id_displayName\").val(\"\");\n");
      out.write("        \t $(\"#id_worflowCode\").val(\"\");\n");
      out.write("        \t $(\"#id_name\").val(\"\");\n");
      out.write("        \t $(\"#id_version\").val(\"\");\n");
      out.write("        \t $(\"#id_jpdlVersion\").val(\"4.4\");\n");
      out.write("        \t $(\"#id_description\").val(\"\");\n");
      out.write("\n");
      out.write("        \t getTracywindyObject('id_workflowType_combo').setValue(\"\");\n");
      out.write("        \t getTracywindyObject('id_comboMenuPosition').setRawValue(\"最后\");\n");
      out.write("         }\n");
      out.write("         function toCreateNewWorkflowPage()\n");
      out.write("         {\n");
      out.write("        \t var displayName = $(\"#id_displayName\").val();\n");
      out.write("             var name = $(\"#id_name\").val();\n");
      out.write("             var version = $(\"#id_version\").val();\n");
      out.write("             var type = getTracywindyObject('id_workflowType_combo').getValue();\n");
      out.write("             var code = $(\"#id_worflowCode\").val();\n");
      out.write("             var jpdlVersion = $(\"#id_jpdlVersion\").val();\n");
      out.write("             var description = $(\"#id_description\").val();\n");
      out.write("             if(!type){alert(\"流程分类不能为空\");return;}\n");
      out.write("             if(!displayName){alert(\"流程显示名称不能为空\");return;}\n");
      out.write("             if(!code){alert(\"流程编号不能为空\");return;}\n");
      out.write("             if(!name){alert(\"流程关键字不能为空\");return;}\n");
      out.write("             if(!version){alert(\"流程版本号不能为空\");return;}\n");
      out.write("             if(!jpdlVersion){alert(\"设计器版本不能为空\");return;}\n");
      out.write("             if(!/^\\d+$/.test(version))\n");
      out.write("             {\n");
      out.write("            \t alert(\"流程版本号必须为数字\");return;\n");
      out.write("             }\n");
      out.write("             loadMask.show();\n");
      out.write("            $(\"#id_form_queryText_id\").val($(\"#id_queryWorkflowsTableInput\").val());\n");
      out.write("    \t    $(\"#id_form_display_name\").val(displayName);\n");
      out.write("    \t    $(\"#id_form_workflow_name\").val(name);\n");
      out.write("    \t    $(\"#id_form_workflow_type\").val(type);\n");
      out.write("    \t    $(\"#id_form_workflow_code\").val(code);\n");
      out.write("    \t    $(\"#id_form_workflow_position\").val(getTracywindyObject('id_comboMenuPosition').getValue());\n");
      out.write("    \t    $(\"#id_form_workflow_version\").val(parseInt(version)+\"\");\n");
      out.write("    \t    $(\"#id_form_workflow_jpdlVersion\").val(jpdlVersion);\n");
      out.write("    \t    $(\"#id_form_workflow_description\").val(description);\n");
      out.write("    \t    submitForm(jpdlVersion);\n");
      out.write("         }\n");
      out.write("         function submitForm(jpdlVersion)\n");
      out.write("         {\n");
      out.write("             /*var formAction = \"\";\n");
      out.write("             if(\"4.4\" == jpdlVersion)\n");
      out.write("             {\n");
      out.write("            \t formAction = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/workflow/jbpm-designer/jbpm4-4-designer.bi\";\n");
      out.write("             }\n");
      out.write("             else if(\"4.3\" == jpdlVersion)\n");
      out.write("             {\n");
      out.write("            \t formAction = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/workflow/jbpm-designer/jbpm4-3-designer.bi\";\n");
      out.write("             }\n");
      out.write("            formAction = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/getDesignerSavedDiagramInfo.action\";\n");
      out.write("            formAction+=\"?pageStart=\"+getTracywindyObject(\"id_workflows_table\").start;\n");
      out.write("            var form =$(\"#id_workflow_form\")[0];\n");
      out.write("            with(form)\n");
      out.write("            {\n");
      out.write("                target=\"_self\";\n");
      out.write("            \taction = formAction;\n");
      out.write("            } \n");
      out.write("            form.submit();\n");
      out.write("            return false;*/\n");
      out.write("            var formAction = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/getDesignerSavedDiagramInfo.action\";\n");
      out.write("            formAction+=\"?pageStart=\"+getTracywindyObject(\"id_workflows_table\").start;\n");
      out.write("            //打开窗体，并post提交页面   \n");
      out.write("            var toDay =  new Date();     \n");
      out.write("            windowname=\"win\"+toDay.getTime(); \n");
      out.write("            var sheight = window.screen.availHeight-30;\n");
      out.write("            var swidth = window.screen.availWidth-10;\n");
      out.write("            window.open(formAction,windowname,\"left=0px,top=0px,height=\"+sheight+\"px,width=\"+swidth+\"px,scrollbars=yes,fullscreen=yes,status=yes,toolbar=no,menubar=no,location=no\");   \n");
      out.write("            var form =$(\"#id_workflow_form\")[0];\n");
      out.write("            with(form)\n");
      out.write("            {\n");
      out.write("               target=windowname;\n");
      out.write("           \t   action = formAction;\n");
      out.write("            } \n");
      out.write("            form.submit();\n");
      out.write("            loadMask.hide();\n");
      out.write("            try{\n");
      out.write("            \tjQuery(\"#id_createNewWorkflowWindow\").window(\"close\");\n");
      out.write("            }catch(e){}\n");
      out.write("           return false;\n");
      out.write("         }\n");
      out.write("         function modifyWorkflow(rowIndex,isDeployed)\n");
      out.write("         {\n");
      out.write("        \t loadMask.show();\n");
      out.write("        \t resetCreateNewWorkflowPage();\n");
      out.write("        \t var rowData = getTracywindyObject('id_workflows_table').getRowDataAt(rowIndex);\n");
      out.write("        \t setFormFieldValue(rowData);\n");
      out.write("    \t    var jpdlVersion = rowData['processdefinitionjpdlversion'];\n");
      out.write("            if('true'==isDeployed)\n");
      out.write("            {\n");
      out.write("           \t   $(\"#id_form_workflow_isDeployed\").val(\"true\");\n");
      out.write("            }\n");
      out.write("            submitForm(jpdlVersion);\n");
      out.write("         } \n");
      out.write("         function setFormFieldValue(rowData)\n");
      out.write("         {\n");
      out.write("        \t var id = rowData['id'];\n");
      out.write("        \t var designerWorkflowJsonString = rowData['designerworkflowjsonstring'];\n");
      out.write("        \t $(\"#id_form_workflow_id\").val(id);\n");
      out.write("        \t $(\"#id_form_queryText_id\").val($(\"#id_queryWorkflowsTableInput\").val());\n");
      out.write("        \t //$(\"#id_form_workflow_designerWorkflowJsonString\").val(designerWorkflowJsonString);\n");
      out.write("        \t var jpdlVersion = rowData['processdefinitionjpdlversion'];\n");
      out.write("     \t     $(\"#id_form_display_name\").val(rowData['processdefinitiondisplayname']);\n");
      out.write("     \t     $(\"#id_form_workflow_name\").val(rowData['processdefinitionkey']);\n");
      out.write("     \t     $(\"#id_form_workflow_type\").val(rowData['type']);\n");
      out.write("     \t     $(\"#id_form_workflow_code\").val(rowData['code']);\n");
      out.write("     \t     //$(\"#id_form_workflow_position\").val(rowData['position']);\n");
      out.write("     \t     $(\"#id_form_workflow_position\").val(rowData['processdefinitionkey']+\"-\"+rowData['processdefinitionversion']);\n");
      out.write("    \t     $(\"#id_form_workflow_version\").val(rowData['processdefinitionversion']);\n");
      out.write("    \t     $(\"#id_form_workflow_jpdlVersion\").val(jpdlVersion);\n");
      out.write("    \t     $(\"#id_form_workflow_description\").val(rowData['processdefinitiondescription']);\n");
      out.write("         }\n");
      out.write("         function viewDiagram(rowIndex)\n");
      out.write("         {\n");
      out.write("        \t var currentRowIndex = globalRowIndex;\n");
      out.write("             if(rowIndex ||( 0 == rowIndex))\n");
      out.write("             {\n");
      out.write("            \t currentRowIndex = rowIndex;\n");
      out.write("             }\n");
      out.write("        \t var rowData = getTracywindyObject('id_workflows_table').getRowDataAt(currentRowIndex);\n");
      out.write("        \t setFormFieldValue(rowData);\n");
      out.write("        \t var jpdlVersion = rowData['processdefinitionjpdlversion'];\n");
      out.write("             var formAction = \"\";\n");
      out.write("             if(\"4.4\" == jpdlVersion)\n");
      out.write("             {\n");
      out.write("            \t formAction = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/workflow/jbpm-designer/jbpm4-4-diagram.bi\";\n");
      out.write("             }\n");
      out.write("             else if(\"4.3\" == jpdlVersion)\n");
      out.write("             {\n");
      out.write("            \t formAction = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/workflow/jbpm-designer/jbpm4-3-diagram.bi\";\n");
      out.write("             }\n");
      out.write("            var form =$(\"#id_workflow_form\")[0];\n");
      out.write("            with(form)\n");
      out.write("            {\n");
      out.write("            \ttarget = \"\";\n");
      out.write("            \taction = formAction;\n");
      out.write("            } \n");
      out.write("            form.submit();\n");
      out.write("            return false;\n");
      out.write("         }\n");
      out.write("     \t//显示流程图\n");
      out.write("     \tfunction toProcessActivePicture(deployId,processInstanceId,maxDotX,maxDotY)\n");
      out.write("     \t{\n");
      out.write("     \t\tmaxDotX = (maxDotX+\"\")||\"0\";\n");
      out.write("     \t\tmaxDotY = (maxDotY+\"\")||\"0\";\n");
      out.write("     \t   //var sheight = 600;\n");
      out.write("     \t   //var swidth = 850;\n");
      out.write("     \t   var winoption =null;//\"height=\"+sheight+\"px;width=\"+swidth+\"px;status=no;scroll=yes;resizable=yes\";\n");
      out.write("     \t   window.open(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/workflow/jbpm/getActivedRects.action?deployId=\"+deployId+\"&maxDotX=\"+maxDotX+\"&maxDotY=\"+maxDotY+\"&processInstanceId=\"+processInstanceId+\"&randomNumber=\"+Math.random(),\"_blank\");\n");
      out.write("     \t}\n");
      out.write("         function publishDeploy(rowIndex)\n");
      out.write("         {\n");
      out.write("        \t loadMask.show();\n");
      out.write("        \t var rowData = getTracywindyObject('id_workflows_table').getRowDataAt(rowIndex);\n");
      out.write("        \t var designedId = rowData['id'];\n");
      out.write("             ajaxRequest({\n");
      out.write("                method:'post',\n");
      out.write("                url:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/deployWorkflow.action',\n");
      out.write("                success:function(res){alert(\"发布成功\");loadMask.hide();getTracywindyTable(\"id_workflows_table\").reload();},\n");
      out.write("                failure:function(res){alert(\"发布失败\");loadMask.hide();getTracywindyTable(\"id_workflows_table\").reload();},\n");
      out.write("                params:{\n");
      out.write("                \tdesignedId:designedId\n");
      out.write("                }\n");
      out.write("             });\n");
      out.write("         }\n");
      out.write("         function removeDeploy(rowIndex)\n");
      out.write("         {\n");
      out.write("           if(window.confirm(\"确定删除该流程相关的所有信息么？\"))\n");
      out.write("           {\n");
      out.write("          \t var rowData = getTracywindyObject('id_workflows_table').getRowDataAt(rowIndex);\n");
      out.write("        \t var designedId = rowData['id'];\n");
      out.write("        \t var deployId  = rowData['deployid'];\n");
      out.write("        \t loadMask.show();\n");
      out.write("        \t ajaxRequest({\n");
      out.write("                 method:'post',\n");
      out.write("                 url:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/removeDeployedWorkflow.action',\n");
      out.write("                 success:function(res){\n");
      out.write("                     alert(\"删除成功\");\n");
      out.write("                     loadMask.hide();\n");
      out.write("                     var workflowsTable = getTracywindyTable(\"id_workflows_table\");\n");
      out.write("\t                 workflowsTable.setParams({\n");
      out.write("\t                        queryText:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.queryText}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("'\n");
      out.write("\t                 });\n");
      out.write("\t                 doLocalTablePageReload( workflowsTable.params, workflowsTable.start, workflowsTable.pageSize);\n");
      out.write("                 },\n");
      out.write("                 failure:function(res){\n");
      out.write("                     alert(\"删除失败\");\n");
      out.write("                     loadMask.hide();\n");
      out.write("\t                 var workflowsTable = getTracywindyTable(\"id_workflows_table\");\n");
      out.write("\t                 workflowsTable.setParams({\n");
      out.write("\t                        queryText:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.queryText}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("'\n");
      out.write("\t                 });\n");
      out.write("\t                 doLocalTablePageReload( workflowsTable.params, workflowsTable.start, workflowsTable.pageSize);\n");
      out.write("                 },\n");
      out.write("                 params:{\n");
      out.write("                \t designedId:designedId,\n");
      out.write("                \t deployId:deployId\n");
      out.write("                 }\n");
      out.write("              });\n");
      out.write("           }\n");
      out.write("         }\n");
      out.write("         function removeDesignedWorkflow(rowIndex)\n");
      out.write("         {\n");
      out.write("           if(window.confirm(\"确定删除该流程设计么？\"))\n");
      out.write("           {\n");
      out.write("          \t var rowData = getTracywindyObject('id_workflows_table').getRowDataAt(rowIndex);\n");
      out.write("        \t var designedId = rowData['id'];\n");
      out.write("        \t loadMask.show();\n");
      out.write("        \t ajaxRequest({\n");
      out.write("                 method:'post',\n");
      out.write("                 url:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/removeDesignedWorkflow.action',\n");
      out.write("                 success:function(res){\n");
      out.write("                \t var workflowsTable = getTracywindyTable(\"id_workflows_table\");\n");
      out.write("\t                 workflowsTable.setParams({\n");
      out.write("\t                        queryText:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.queryText}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("'\n");
      out.write("\t                 });\n");
      out.write("\t                 doLocalTablePageReload( workflowsTable.params, workflowsTable.start, workflowsTable.pageSize);\n");
      out.write("                 },\n");
      out.write("                 failure:function(res){\n");
      out.write("                \t var workflowsTable = getTracywindyTable(\"id_workflows_table\");\n");
      out.write("\t                 workflowsTable.setParams({\n");
      out.write("\t                        queryText:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.queryText}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("'\n");
      out.write("\t                 });\n");
      out.write("\t                 doLocalTablePageReload( workflowsTable.params, workflowsTable.start, workflowsTable.pageSize);\n");
      out.write("                 },\n");
      out.write("                 params:{\n");
      out.write("                \t designedId:designedId\n");
      out.write("                 }\n");
      out.write("              });\n");
      out.write("           }\n");
      out.write("         }\n");
      out.write("       </script>\n");
      out.write("       <!-- 流程设置 -->\n");
      out.write("       <div id=\"id_processDefinitionsContainer\"></div>\n");
      out.write("       <div id=\"id_workflow_setting\"  closed=\"true\" modal=\"true\" title=\"流程节点设置\" style=\"display:none;padding:2px;text-align:center;overflow:hidden;\">\n");
      out.write("\t\t   <div id=\"id_workflow_activity_detail\">\n");
      out.write("\t\t   </div>\n");
      out.write("\t   </div>\n");
      out.write("       <div id=\"id_workflow_key_setting\"  closed=\"true\" modal=\"true\" title=\"流程关键字设置\" style=\"display:none;width:450px;padding:2px;padding-top:10px;text-align:center;overflow:auto;\">\n");
      out.write("\t       \t       <table width=\"100%;\" style=\"table-layout:fixed;\">\n");
      out.write("\t                  <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字一：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyOne\"/></td>\n");
      out.write("\t\t             </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字二：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyTwo\"/></td>\n");
      out.write("\t\t              </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字三：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyThree\"/></td>\n");
      out.write("\t\t              </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字四：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyFour\"/></td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字五：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyFive\"/></td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字六：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keySix\"/></td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字七<font color=\"red\">(付款单号)</font>：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keySeven\"/></td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字八<font color=\"red\">(合同流水号)</font>：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyEight\"/></td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字九<font color=\"red\">(项目立项流水号)</font>：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyNine\"/></td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t\t              <tr>\n");
      out.write("\t\t                  <td class=\"td-label\">关键字十<font color=\"red\">(互斥标识)</font>：</td>\n");
      out.write("\t\t                  <td class=\"td-input\" ><input  id=\"id_keyTen\"/></td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t                 <tr style=\"text-align:center;\">\n");
      out.write("\t\t                  <td  colspan=2 style=\"padding-top:10px;border-top:1px solid silver;\">&nbsp;&nbsp;<input class=\"btn btn-primary\" type=\"button\" value=\"保存\" style=\"width:60px;cursor:pointer;\" onclick=\"javascript:saveKeyToWorkflow();\"/>\n");
      out.write("\t\t                  &nbsp;&nbsp;<input class=\"btn btn-primary\" type=\"button\" value=\"取消\" style=\"width:60px;cursor:pointer;\" onclick=\"jQuery('#id_workflow_key_setting').window('close');\">\n");
      out.write("\t\t                  </td>\n");
      out.write("\t                  </tr>\n");
      out.write("\t             </table>\n");
      out.write("\t   </div>\n");
      out.write("\t   <div id=\"id_workflow_activity_setting\" buttons='#id-activity-diag-buttons' closed=\"true\" modal=\"true\" title=\"流程节点明细设置\" style=\"display:none;padding:2px;width:700px;height:430px;text-align:center;overflow:auto;\">\n");
      out.write("\t      <form id=\"id_workflow_activity_setting_form\">\n");
      out.write("\t        <table width=\"100%;\" style=\"table-layout:fixed;\">\n");
      out.write("\t\t        <tr>\n");
      out.write("\t\t\t        <td style=\"text-align:left;padding-left:20px;height:30px;line-height:30px;border-bottom:1px solid silver;\"  colspan=4>\n");
      out.write("\t\t\t                                   节点类型：&nbsp;&lt;&nbsp;<label  style=\"color:red;font-weight:BOLD;\" id=\"id_activityType\"></label>&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n");
      out.write("\t\t\t                                   节点名称：&nbsp;&lt;&nbsp;<label  style=\"color:red;font-weight:BOLD;\" id=\"id_activityName\"></label>&nbsp;&gt;&nbsp;\n");
      out.write("\t\t\t        </td>\n");
      out.write("\t\t\t    </tr>\n");
      out.write("\t\t   </table>\n");
      out.write("\t        <!-- 标签栏 -->\n");
      out.write("\t\t\t<div id=\"workflow_activity_setting_tabs\" style=\"height:300px;\" >\n");
      out.write("\t\t\t\t<div title=\"基本信息\" style=\"overflow:hidden;\">\n");
      out.write("\t\t\t\t\t   <table width=\"100%;\" style=\"table-layout:fixed;padding-top:2px;line-height:20px;\">\n");
      out.write("\t\t                  <tr style=\"display:none;\"><td style=\"width:100px;\">记录编号：</td><td><input type=\"hidden\" id=\"id_recordId\" value=\"\"/></td></tr>\n");
      out.write("\t\t                  <tr style=\"display:none;\"><td style=\"width:100px;\">部署编号：</td><td><input type=\"hidden\" id=\"id_deployId\" value=\"\"/></td></tr>\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t                  \t  <td class=\"td-label\">表单标题：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3><input style=\"width:400px;border:1px solid silver;\" id=\"id_formTitle\"/></td>\n");
      out.write("\t\t\t              </tr>\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                  <td class=\"td-label\">表单路径：</td>\n");
      out.write("\t\t\t                  <td colspan=3><input style=\"width:400px;border:1px solid silver;\"  type=\"text\" value=\"\"  id=\"id_formPath\"/></td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr><td class=\"td-label\">触发动作：</td>\n");
      out.write("\t\t                  <td colspan=3  id=\"id_activityActionContainer\">\n");
      out.write("\t\t                  </td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr><td class=\"td-label\">附件分类：</td>\n");
      out.write("\t\t                  \t<td colspan=3 id=\"id_attachmentTypeContainer\">\n");
      out.write("\t\t                  \t</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  \n");
      out.write("\t\t                  <tr><td class=\"td-label\">提交按钮：</td>\n");
      out.write("\t\t                  <td colspan=3>\n");
      out.write("\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"save\" type=\"checkbox\" name=\"submitButtons\" />&nbsp;保存\n");
      out.write("\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"read\" type=\"checkbox\" name=\"submitButtons\" />&nbsp;传阅\n");
      out.write("\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"assignment\" type=\"checkbox\" name=\"submitButtons\" />&nbsp;工作指派\n");
      out.write("\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"signature\" type=\"checkbox\" name=\"submitButtons\" />&nbsp;会签\n");
      out.write("\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"back\" type=\"checkbox\" name=\"submitButtons\" />&nbsp;退回\n");
      out.write("\t\t                  </td></tr>\n");
      out.write("\t\t                  <tr><td class=\"td-label\">退回路由：</td><td colspan=3 id=\"id_backRoutesContainer\"></td></tr>\n");
      out.write("\t\t                  <tr><td class=\"td-label\">填写意见：</td><td colspan=3 style=\"text-align:left;padding-left:10px;\">是<input type=\"radio\" name=\"isNeedAdvise\" value=\"1\"/>&nbsp;&nbsp;&nbsp;&nbsp;否<input type=\"radio\" name=\"isNeedAdvise\" value=\"0\"/></td></tr>\n");
      out.write("\t\t                  <tr><td class=\"td-label\">检查附件：</td><td colspan=3 style=\"text-align:left;padding-left:10px;\">是<input type=\"radio\" name=\"isAttachmentChecked\" value=\"true\"/>&nbsp;&nbsp;&nbsp;&nbsp;否<input type=\"radio\" name=\"isAttachmentChecked\" value=\"false\"/></td></tr>\n");
      out.write("\t\t                  <tr style=\"display:none\"><td class=\"td-label\">自动处理：</td><td colspan=3 style=\"text-align:left;padding-left:10px;\">是<input type=\"radio\" name=\"isAutoActivity\" value=\"1\"/>&nbsp;&nbsp;&nbsp;&nbsp;否<input type=\"radio\" name=\"isAutoActivity\" value=\"0\"/></td></tr>\n");
      out.write("\t\t           </table>\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t\t<div title=\"待办\" style=\"overflow:hidden;\">\n");
      out.write("\t\t\t\t    <table width=\"100%;\" style=\"table-layout:fixed;padding-top:20px;line-height:30px;\">\n");
      out.write("\t\t                  <!-- 节点执行人 -->\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                  <td class=\"td-label\">参与人类型：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" id=\"id_initiatorTypeContainer\">\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t\t\t\t\t\t  <td class=\"td-input\">&nbsp;&nbsp;</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr class=\"need-set-value-cls-\">\n");
      out.write("\t\t                      <td class=\"td-label\">参与人：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_initiator_display\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_initiator\" style=\"display:none;width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t\t                  <td class=\"td-input\"><a style=\"display:none;width:80px;margin-left:-35px;\" class=\"btn btn-primary\" href=\"javascript:void(0);\" id=\"id_initiator_button\">选择{0}</a></td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr  >\n");
      out.write("\t\t\t                  <td class=\"td-label\">处理方式：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" id=\"id_dealMethodContainer\" >\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t\t                  <td class=\"td-label n-passed-cls\" style=\"display:none\" >处理人数：</td><td style=\"display:none\" class=\"td-input n-passed-cls\" ><input  type=\"text\" value=\"\"  id=\"id_passedCount\"/>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <!-- 待办提醒-->\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                   <td class=\"td-label\">提醒方式：</td>\n");
      out.write("\t\t\t                   <td colspan=3>\n");
      out.write("\t\t\t                       <!-- -->  \n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"waitToDo\" type=\"checkbox\" disabled=\"disabled\" checked/>&nbsp;待办\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"sms\" type=\"checkbox\" name=\"messageTypes\" />&nbsp;短信\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"mail\" type=\"checkbox\" name=\"messageTypes\" />&nbsp;邮件\n");
      out.write("\t\t\t\t                  <!--  \n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"stationMessage\" type=\"checkbox\" name=\"messageTypes\" />&nbsp;站内信\n");
      out.write("\t\t                 \t\t  -->\n");
      out.write("\t\t                 \t\t</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t                      <td class=\"td-label\">提醒内容：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_messageContent\" name=\"messageContent\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t            </table>\n");
      out.write("\t\t        </div>\n");
      out.write("\t\t        <div title=\"条件路由\">\n");
      out.write("\t\t           <table width=\"100%;\" style=\"table-layout:fixed;padding-top:20px;line-height:30px;\">\n");
      out.write("\t\t            <!-- 条件路由\"配置 -->\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                  <td class=\"td-label\">条件路由类型：</td>\n");
      out.write("\t\t\t                  <td  class=\"td-input\" id=\"id_conditionRouteTypeContainer\"></td>\n");
      out.write("\t\t                  \t  <td class=\"td-input\">&nbsp;&nbsp;</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr class=\"need-set-value-cls-conditionRoute\">\n");
      out.write("\t\t                      <td class=\"td-label\" >条件路由数值：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=2>\n");
      out.write("\t\t\t\t                  <textarea  value=\"workflowNextRouteCallBack\" id=\"id_conditionRouteValue\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr class=\"need-set-value-cls-conditionRoute-label\" style=\"display:none;\">\n");
      out.write("\t\t                      <td colspan=3 >\n");
      out.write("\t\t\t\t                  <div style=\"text-indent:20px;font-size:12px;\"> \n");
      out.write("\t\t\t\t                                      条件路由数值将被忽略,将会调用页面中的回调函数&nbsp;<font style=\"color:red\">workflowNextRouteCallBack(buttonText,requestNextRoute)</font>&nbsp;<br/>\n");
      out.write("\t\t\t\t                                      通过&nbsp;<font style=\"color:red\">requestNextRoute.value=\"指定的路由路径\"</font>&nbsp;来指定路由路径\n");
      out.write("\t\t\t\t                  </div>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t            </table>\n");
      out.write("\t\t        </div>\n");
      out.write("\t\t        <div title=\"传阅 \" style=\"overflow:hidden;\">\n");
      out.write("\t\t            <table width=\"100%;\" style=\"table-layout:fixed;padding-top:20px;line-height:30px;\">\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                  <td class=\"td-label\">传阅参与人类型：</td>\n");
      out.write("\t\t\t                  <td  class=\"td-input\" id=\"id_autoReadInitiatorTypeContainer\"></td>\n");
      out.write("\t\t                  \t  <td class=\"td-input\">&nbsp;&nbsp;</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr class=\"need-set-value-cls-read\">\n");
      out.write("\t\t                      <td class=\"td-label\" >传阅参与人：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_autoReadInitiator_display\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_autoReadInitiator\" style=\"display:none;width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t\t                  <td class=\"td-input\"><a style=\"display:none;width:80px;margin-left:-35px;\" class=\"btn btn-primary\" href=\"javascript:void(0);\" id=\"id_autoReadInitiator_button\">选择{0}</a></td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                 <!-- 传阅提醒 -->\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                   <td class=\"td-label\">提醒方式：</td>\n");
      out.write("\t\t\t                   <td colspan=3>\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"waitToDo\" type=\"checkbox\" disabled=\"disabled\" checked/>&nbsp;待办\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"sms\" type=\"checkbox\" name=\"readMessageTypes\" />&nbsp;短信\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"mail\" type=\"checkbox\" name=\"readMessageTypes\" />&nbsp;邮件\n");
      out.write("\t\t\t\t                  <!-- \n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"stationMessage\" type=\"checkbox\" name=\"readMessageTypes\" />&nbsp;站内信\n");
      out.write("\t\t                 \t\t  -->\n");
      out.write("\t\t                 \t\t</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t                      <td class=\"td-label\">提醒内容：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_readMessageContent\" name=\"readMessageContent\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t                  </tr> \n");
      out.write("\t\t                 \n");
      out.write("\t\t            </table>\n");
      out.write("\t\t        </div>\n");
      out.write("\t\t        <!---->  \n");
      out.write("\t\t        <div title=\"会签\" style=\"overflow:hidden;\">\n");
      out.write("\t\t        \t<table width=\"100%;\" style=\"table-layout:fixed;padding-top:20px;line-height:30px;\">\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                    <td class=\"td-label\">会签参与人类型：</td>\n");
      out.write("\t\t\t                    <td  class=\"td-input\" id=\"id_autoSignatureInitiatorTypeContainer\" >\n");
      out.write("\t\t\t                    </td>\n");
      out.write("\t\t\t                    <td class=\"td-input\">&nbsp;&nbsp;</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr class=\"need-set-value-cls-signature\">\n");
      out.write("\t\t                      <td class=\"td-label\">会签参与人：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_autoSignatureInitiator_display\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_autoSignatureInitiator\" style=\"display:none;width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t\t                  <td class=\"td-input\"><a style=\"display:none;width:80px;margin-left:-35px;\" class=\"btn btn-primary\" href=\"javascript:void(0);\" id=\"id_autoSignatureInitiator_button\">选择{0}</a></td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <!-- 会签提醒-->\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                   <td class=\"td-label\">提醒方式：</td>\n");
      out.write("\t\t\t                   <td colspan=3>\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"waitToDo\" type=\"checkbox\" disabled=\"disabled\" checked/>&nbsp;待办\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"sms\" type=\"checkbox\" name=\"signatureMessageTypes\" />&nbsp;短信\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"mail\" type=\"checkbox\" name=\"signatureMessageTypes\" />&nbsp;邮件\n");
      out.write("\t\t\t\t                  <!--  \n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"stationMessage\" type=\"checkbox\" name=\"signatureMessageTypes\" />&nbsp;站内信\n");
      out.write("\t\t                 \t\t  -->\n");
      out.write("\t\t                 \t\t</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t                      <td class=\"td-label\">提醒内容：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_signatureMessageContent\" name=\"signatureMessageContent\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t                  </tr> \n");
      out.write("\t\t                  \n");
      out.write("\t\t            </table>\n");
      out.write("\t\t        </div>\n");
      out.write("\t\t        \n");
      out.write("\t\t        <!--\n");
      out.write("\t\t        <div title=\"待办提醒\" style=\"overflow:hidden;\">\n");
      out.write("\t\t        \t<table width=\"100%;\" style=\"table-layout:fixed;padding-top:20px;line-height:30px;\">\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t\t                    <td class=\"td-label\">信息类型：</td>\n");
      out.write("\t\t\t                   <td colspan=3>\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"waitToDo\" type=\"checkbox\" disabled=\"disabled\" checked/>&nbsp;待办\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"sms\" type=\"checkbox\" name=\"messageTypes\" />&nbsp;短信\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"mail\" type=\"checkbox\" name=\"messageTypes\" />&nbsp;邮件\n");
      out.write("\t\t\t\t                  <input  style=\"position:relative;top:3px;\" value=\"stationMessage\" type=\"checkbox\" name=\"messageTypes\" />&nbsp;站内信\n");
      out.write("\t\t                 \t\t</td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t                  <tr>\n");
      out.write("\t\t                      <td class=\"td-label\">信息内容：</td>\n");
      out.write("\t\t\t                  <td class=\"td-input\" colspan=3>\n");
      out.write("\t\t\t\t                  <textarea  id=\"id_messageContent\" name=\"messageContent\" style=\"width:300px;margin-left:0px;height:50px;overflow:auto;border:1px solid silver;\">\n");
      out.write("\t\t\t\t                  </textarea>\n");
      out.write("\t\t\t                  </td>\n");
      out.write("\t\t                  </tr>\n");
      out.write("\t\t            </table>\n");
      out.write("\t\t        </div>\n");
      out.write("\t\t        -->\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t\t</form>\n");
      out.write("\t   </div>\n");
      out.write("\t   <div id=\"id-activity-diag-buttons\" style=\"display:none;\">\n");
      out.write("\t      \t<table width=\"100%;\">\n");
      out.write("\t\t\t\t<tr style=\"text-align:center;\">\n");
      out.write("\t\t\t      <td  colspan=4 style=\"padding-top:6px;\">&nbsp;&nbsp;<input class=\"btn btn-primary\" type=\"button\" value=\"保存\" style=\"width:60px;cursor:pointer;\" onclick=\"javascript:saveChangeToActivity();\"/>\n");
      out.write("\t\t\t      &nbsp;&nbsp;<input class=\"btn btn-primary\" type=\"button\" value=\"取消\" style=\"width:60px;cursor:pointer;\" onclick=\"jQuery('#id_workflow_activity_setting').window('close');\">\n");
      out.write("\t\t\t      </td>\n");
      out.write("\t\t        </tr>\n");
      out.write("\t\t    </table>\n");
      out.write("\t   </div>\n");
      out.write("       <script type=\"text/javascript\">\n");
      out.write("          $(function(){\n");
      out.write("        \t  $('#workflow_activity_setting_tabs').tabs();\n");
      out.write("          });\n");
      out.write("          \n");
      out.write("          function workflowActivitiesSetting(rowIndex,deployId,deployDesc,maxDotX,maxDotY)\n");
      out.write("          {\n");
      out.write("        \t  globalRowIndex = rowIndex;\n");
      out.write("        \t  jQuery(\"#id_workflow_setting\").show();\n");
      out.write("          \t  var cwin = jQuery(\"#id_workflow_setting\").window({\n");
      out.write("              \tleft:50,\n");
      out.write("              \ttop:20,\n");
      out.write("              \tzIndex:9000,\n");
      out.write("              \ttitle:\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&nbsp;<a href='javascript:void(0);' onclick=\\\"toProcessActivePicture('\"+deployId+\"','-1','\"+maxDotX+\"','\"+maxDotY+\"');\\\">\"+deployDesc+\"</a>&nbsp;&gt;&nbsp;流程节点设置\",\n");
      out.write("              \tdraggable:false,\n");
      out.write("              \tresizable:false,\n");
      out.write("              \tshadow:true,\n");
      out.write("              \tmodal:true,\n");
      out.write("              \tinline:false,\n");
      out.write("              \tcollapsible:false,\n");
      out.write("              \tminimizable:false,\n");
      out.write("              \tmaximizable:false,\n");
      out.write("              \tclosable:true,\n");
      out.write("              \tclosed:false\n");
      out.write("              });\n");
      out.write("              var table_activities = getTracywindyObject('id_workflow_activity_detail_table');\n");
      out.write("              table_activities.setParams({deployId:deployId});\n");
      out.write("              table_activities.reload();\n");
      out.write("          \t  cwin.window(\"open\");\n");
      out.write("          }\n");
      out.write("          function workflowInfoSetting(rowIndex,deployId,deployDesc)\n");
      out.write("          {\n");
      out.write("        \t  globalRowIndex = rowIndex;\n");
      out.write("        \t  jQuery(\"#id_workflow_info_setting\").show();\n");
      out.write("          \t  var cwin = jQuery(\"#id_workflow_info_setting\").window({\n");
      out.write("              \tleft:50,\n");
      out.write("              \ttop:20,\n");
      out.write("              \tzIndex:9000,\n");
      out.write("              \ttitle:\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（ \"+deployDesc+\" ）流程信息修改\",\n");
      out.write("              \tdraggable:false,\n");
      out.write("              \tresizable:false,\n");
      out.write("              \tshadow:true,\n");
      out.write("              \tmodal:false,\n");
      out.write("              \tinline:false,\n");
      out.write("              \tcollapsible:false,\n");
      out.write("              \tminimizable:false,\n");
      out.write("              \tmaximizable:false,\n");
      out.write("              \tclosable:true,\n");
      out.write("              \tclosed:false\n");
      out.write("              });\n");
      out.write("          \t  cwin.window(\"open\");\n");
      out.write("          }\n");
      out.write("          function workflowKeySetting(rowIndex,deployId,deployDesc)\n");
      out.write("          {\n");
      out.write("         \t  var rowData = getTracywindyObject('id_workflows_table').getRowDataAt(rowIndex);\n");
      out.write("         \t  var keyOne  = rowData['keyone'];\n");
      out.write("         \t  var keyTwo  = rowData['keytwo'];\n");
      out.write("         \t  var keyThree = rowData['keythree'];\n");
      out.write("         \t  var keyFour  = rowData['keyfour'];\n");
      out.write("         \t  var keyFive  = rowData['keyfive'];\n");
      out.write("         \t  var keySix  =  rowData['keysix'];\n");
      out.write("         \t  var keySeven  = rowData['keyseven'];\n");
      out.write("         \t  var keyEight  = rowData['keyeight'];\n");
      out.write("         \t  var keyNine  = rowData['keynine'];\n");
      out.write("         \t  var keyTen    = rowData['keyten'];\n");
      out.write("         \t  $(\"#id_keyOne\").val(keyOne);\n");
      out.write("         \t  $(\"#id_keyTwo\").val(keyTwo);\n");
      out.write("         \t  $(\"#id_keyThree\").val(keyThree);\n");
      out.write("         \t  $(\"#id_keyFour\").val(keyFour);\n");
      out.write("         \t  $(\"#id_keyFive\").val(keyFive);\n");
      out.write("         \t  $(\"#id_keySix\").val(keySix);\n");
      out.write("         \t  $(\"#id_keySeven\").val(keySeven);\n");
      out.write("         \t  $(\"#id_keyEight\").val(keyEight);\n");
      out.write("         \t  $(\"#id_keyNine\").val(keyNine);\n");
      out.write("         \t  $(\"#id_keyTen\").val(keyTen);\n");
      out.write("         \t  \n");
      out.write("        \t  globalRowIndex = rowIndex;\n");
      out.write("        \t  jQuery(\"#id_workflow_key_setting\").show();\n");
      out.write("          \t  var cwin = jQuery(\"#id_workflow_key_setting\").window({\n");
      out.write("              \ttop:50,\n");
      out.write("              \tzIndex:9000,\n");
      out.write("              \ttitle:\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（<a href='javascript:void(0);' onclick=\\\"viewDiagram();\\\">\"+deployDesc+\"</a>）流程关键字设置\",\n");
      out.write("              \tdraggable:false,\n");
      out.write("              \tresizable:false,\n");
      out.write("              \tshadow:true,\n");
      out.write("              \tmodal:false,\n");
      out.write("              \tinline:false,\n");
      out.write("              \tcollapsible:false,\n");
      out.write("              \tminimizable:false,\n");
      out.write("              \tmaximizable:false,\n");
      out.write("              \tclosable:true,\n");
      out.write("              \tclosed:false\n");
      out.write("              });\n");
      out.write("          \t  cwin.window(\"open\");\n");
      out.write("          }\n");
      out.write("          function saveKeyToWorkflow()\n");
      out.write("          {\n");
      out.write("        \t  var currentRowIndex = globalRowIndex;\n");
      out.write("         \t  var rowData = getTracywindyObject('id_workflows_table').getRowDataAt(currentRowIndex);\n");
      out.write("         \t  var designerId  = rowData['id'];\n");
      out.write("         \t  var keyOne  = $(\"#id_keyOne\").val();\n");
      out.write("         \t  var keyTwo  = $(\"#id_keyTwo\").val();\n");
      out.write("         \t  var keyThree = $(\"#id_keyThree\").val();\n");
      out.write("         \t  var keyFour  = $(\"#id_keyFour\").val();\n");
      out.write("        \t  var keyFive  = $(\"#id_keyFive\").val();\n");
      out.write("         \t  var keySix   = $(\"#id_keySix\").val();\n");
      out.write("         \t  var keySeven = $(\"#id_keySeven\").val();\n");
      out.write("         \t  var keyEight = $(\"#id_keyEight\").val();\n");
      out.write("         \t  var keyNine = $(\"#id_keyNine\").val();\n");
      out.write("         \t  var keyTen   = $(\"#id_keyTen\").val();\n");
      out.write("              loadMask.show();\n");
      out.write("        \t  var url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/saveKeyToWorkflow.action\";\n");
      out.write("              $.ajax({\n");
      out.write("                 url:url,\n");
      out.write("                 type:'POST',\n");
      out.write("                 dataType:'text',\n");
      out.write("                 data:{\n");
      out.write("            \t    designerId:designerId,\n");
      out.write("            \t    keyOne:keyOne,\n");
      out.write("            \t    keyTwo:keyTwo,\n");
      out.write("            \t    keyThree:keyThree,\n");
      out.write("            \t    keyFour:keyFour,\n");
      out.write("            \t    keyFive:keyFive,\n");
      out.write("            \t    keySix:keySix,\n");
      out.write("            \t    keySeven:keySeven,\n");
      out.write("            \t    keyEight:keyEight,\n");
      out.write("            \t    keyNine:keyNine,\n");
      out.write("            \t    keyTen:keyTen\n");
      out.write("                 },\n");
      out.write("                 success:function(data){\n");
      out.write("                \t  alert(\"关键字设置成功\");\n");
      out.write("                \t  var workflowsTable = getTracywindyTable(\"id_workflows_table\");\n");
      out.write("                      workflowsTable.setParams({\n");
      out.write("                             queryText:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.queryText}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("'\n");
      out.write("                      });\n");
      out.write("                      doLocalTablePageReload( workflowsTable.params, workflowsTable.start, workflowsTable.pageSize);\n");
      out.write("                 }\n");
      out.write("              });\n");
      out.write("         \t  \n");
      out.write("          }\n");
      out.write("          function startProcess(processDefinitionId)\n");
      out.write("          {\n");
      out.write("              if(window.confirm(\"确认发起新流程?\"))\n");
      out.write("              {\n");
      out.write("            \t  window.open(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/startDeployedProcess.action?processDefinitionId=\"+escape(encodeURIComponent(processDefinitionId)),\"_blank\");\n");
      out.write("              }\n");
      out.write("          }\n");
      out.write("          function workflowSynchronized(deployId)\n");
      out.write("          {\n");
      out.write("              loadMask.show();\n");
      out.write("        \t  var url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/workflowSynchronized.action\";\n");
      out.write("              $.ajax({\n");
      out.write("                 url:url,\n");
      out.write("                 type:'POST',\n");
      out.write("                 dataType:'text',\n");
      out.write("                 data:{\n");
      out.write("                \t deployId:deployId\n");
      out.write("                 },\n");
      out.write("                 success:function(res){\n");
      out.write("                \t  alert(res);\n");
      out.write("                \t  getTracywindyTable(\"id_workflows_table\").reload();\n");
      out.write("                \t  loadMask.hide();\n");
      out.write("                 }\n");
      out.write("              });\n");
      out.write("          }\n");
      out.write("       </script>\n");
      out.write("\t  <script type=\"text/javascript\">\n");
      out.write("\t     function getChineseActorType(actorType)\n");
      out.write("\t     {\n");
      out.write("\t\t    var chineseActorType = \"\";\n");
      out.write("\t\t    switch(actorType){\n");
      out.write("\t\t    \tcase  'requestInitiator': { chineseActorType = '流程发起人';break;}\n");
      out.write("\t\t    \tcase  'user': { chineseActorType = '指定人员';break;}\n");
      out.write("\t\t    \tcase  'requestInitiatorRelation': { chineseActorType = '发起人关系';break;}\n");
      out.write("\t\t    \tcase  'submitRelation': { chineseActorType = '提交人关系';break;}\n");
      out.write("                case  'requestInitiatorDefinedRelation':{chineseActorType='预定义的发起人关系';break;}\n");
      out.write("                case  'submitDefinedRelation': { chineseActorType = '预定义的提交人关系';break;}\n");
      out.write("\t\t    \tcase  'dept': { chineseActorType = '部门';break;}\n");
      out.write("\t\t    \tcase  'deptRole': { chineseActorType = '角色';break;}\n");
      out.write("\t\t    \tcase  'group': { chineseActorType = '群组';break;}\n");
      out.write("\t\t    \tcase  'step': { chineseActorType = '历史步骤';break;}\n");
      out.write("\t\t    \tcase  'formField': { chineseActorType = '表单域';break;}\n");
      out.write("\t\t    \tcase  'sql': { chineseActorType = '自定义';break;}\n");
      out.write("\t\t    \tdefault:{chineseActorType = \"\";}\n");
      out.write("\t\t    }\n");
      out.write("     \t\treturn chineseActorType;\n");
      out.write("\t\t }\n");
      out.write("\t     function getChineseConditionRouteType(conditionRouteType){\n");
      out.write("\t\t\t\tvar value = \"\";\n");
      out.write("\t\t\t\tswitch(conditionRouteType){\n");
      out.write("\t\t\t    \tcase  'pageCallBack' : { value = \"页面回调函数\";break;}\n");
      out.write("\t\t\t    \tcase  'field': { value = \"表单域\";break;}\n");
      out.write("\t\t\t    \tcase  'expression': { value = \"表达式\";break;}\n");
      out.write("\t\t\t    \tcase  'sql': { value = \"自定义\";break;}\n");
      out.write("\t\t\t    \tdefault:{\n");
      out.write("\t\t\t\t    \tvalue = \"\";\n");
      out.write("\t\t\t\t    }\n");
      out.write("\t\t\t    }\n");
      out.write("\t\t\t    return value;\n");
      out.write("\t     }\n");
      out.write("\t\t function renderActorValue(actorType,displayValue,hiddenValue){\n");
      out.write("\t\t\tvar value = \"\";\n");
      out.write("\t\t\tswitch(actorType){\n");
      out.write("\t\t    \tcase  'formField': \n");
      out.write("\t\t    \tcase  'sql': { value = hiddenValue;break;}\n");
      out.write("\t\t    \tdefault:{\n");
      out.write("\t\t\t    \tvalue = displayValue;\n");
      out.write("\t\t\t    }\n");
      out.write("\t\t    }\n");
      out.write("\t\t    return value;\n");
      out.write("\t     }\n");
      out.write("\t     jQuery(function(){\n");
      out.write("\t    \t  loadMask = new tracywindyLoadMask(document.body,'操作进行中，请稍等...');\n");
      out.write("\t\t      jQuery(\"#id_workflow_setting\").css(\"width\",(all_width-100)+\"px\");\n");
      out.write("\t\t      jQuery(\"#id_workflow_setting\").css(\"height\",(all_height-50)+\"px\");\n");
      out.write("\t    \t var tableActivityDetail= new tracywindyTable({\n");
      out.write("\t\t            renderTo:'id_workflow_activity_detail',\n");
      out.write("\t\t            displayToggleContainer:'id_workflow_setting',\n");
      out.write("\t\t            width:all_width-114,\n");
      out.write("\t\t            height:all_height-112,\n");
      out.write("\t\t            isCheck:false,\n");
      out.write("\t\t            isRank:false,\n");
      out.write("\t\t            rankSize:30,\n");
      out.write("\t\t            toolsLeftMargin:50,\n");
      out.write("\t\t            id:'id_workflow_activity_detail_table',\n");
      out.write("\t\t            checkOnly:true,\n");
      out.write("\t\t            checkType:'checkbox',\n");
      out.write("\t\t            showHeader:true,\n");
      out.write("\t\t            xmlFileName:'\\\\jbpm\\\\queryWorkflowActivities.xml',\n");
      out.write("\t\t            loadMode:'ajax',\n");
      out.write("\t\t            isPage:false,\n");
      out.write("\t\t            params:{deployId:'-1'},\n");
      out.write("\t\t            lockedNames:['oper'],\n");
      out.write("\t\t            resizableAddSize:-50,\n");
      out.write("\t\t            columns:[\n");
      out.write("\t\t \t\t            {header:'操作',name:'oper',width:60},\n");
      out.write("\t\t \t\t            //{header:'记录编号',name:'id',hidden:true},\n");
      out.write("\t\t \t\t            //{header:'部署编号',name:'deploymentimpl',hidden:true},\n");
      out.write("\t\t \t\t            {header:'流程名称',name:'displayworkflowname'},\n");
      out.write("\t\t \t\t            {header:'流程关键字',name:'workflowname'},\n");
      out.write("\t\t \t\t            {header:'节点类型',name:'activitytype'},\n");
      out.write("\t\t \t\t            {header:'节点名称',name:'activityname'},\n");
      out.write("\t\t \t\t            //{header:'是否检查附件',name:'isattachmentchecked',hidden:true},\n");
      out.write("\t\t \t\t            {header:'是否检查附件',name:'isattachmentcheckeddesc'},\n");
      out.write("\t\t \t\t            {header:'参与人类型',name:'actortype',width:160},\n");
      out.write("\t\t \t\t            {header:'参与人',name:'actorvalue',hidden:true},\n");
      out.write("\t\t \t\t            {header:'参与人',name:'displayactorvalue'},\n");
      out.write("\t\t \t\t            {header:'条件路由类型',name:'conditionroutetype'},\n");
      out.write("\t\t \t\t            {header:'条件路由数值',name:'conditionroutevalue'},\n");
      out.write("\t\t \t\t            {header:'参与人信息类型',name:'messagetypes'},\n");
      out.write("\t\t \t\t            {header:'参与人发送内容',name:'messagecontent'},\n");
      out.write("\t\t \t\t            {header:'条件路由数值',name:'conditionroutevalue'},\n");
      out.write("\t\t \t\t            {header:'传阅参与人类型',name:'autoreadactortype',width:160},\n");
      out.write("\t\t \t\t            {header:'传阅参与人',name:'autoreadactorvalue',hidden:true},\n");
      out.write("\t\t \t\t            {header:'传阅参与人',name:'autoreaddisplayactorvalue',width:160},\n");
      out.write("\t\t \t\t            {header:'传阅人信息类型',name:'readmessagetypes'},\n");
      out.write("\t\t \t\t            {header:'传阅人发送内容',name:'readmessagecontent'},\n");
      out.write("\t\t \t\t            {header:'会签参与人类型',name:'autosignatureactortype',width:160},\n");
      out.write("\t\t \t\t            {header:'会签参与人',name:'autosignatureactorvalue',hidden:true},\n");
      out.write("\t\t \t\t            {header:'会签参与人',name:'autosignaturedisplayactorvalue',width:160},\n");
      out.write("\t\t \t\t            {header:'会签人信息类型',name:'signaturemessagetypes'},\n");
      out.write("\t\t \t\t            {header:'会签人发送内容',name:'signaturemessagecontent'},\n");
      out.write("\t\t \t\t            {header:'处理方式',name:'dealmethod'},\n");
      out.write("\t\t \t\t            {header:'通过人数',name:'passedcount'},\n");
      out.write("\t\t \t\t            {header:'应用表单',name:'formpath'},\n");
      out.write("\t\t \t\t            {header:'表单标题',name:'formtitle'},\n");
      out.write("\t\t \t\t            {header:'是否填写意见',name:'isneedadvise'},\n");
      out.write("\t\t \t\t            {header:'是否自动节点',name:'isautoactivity',hidden:true},\n");
      out.write("\t\t \t\t            {header:'操作按钮',name:'operationbuttons'},\n");
      out.write("\t\t \t\t            {header:'节点动作',name:'activityaction'},\n");
      out.write("\t\t \t\t            {header:'附件类型',name:'attachmenttype'},\n");
      out.write("\t\t \t\t            {header:'附件类型编号',name:'attachmenttypeids',hidden:true},\n");
      out.write("\t\t \t\t            {header:'退回路由节点',name:'backactivities'}\n");
      out.write("\t\t\t        ],\n");
      out.write("\t\t            callBack:function(){\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar actorType = rowData['actortype'];\n");
      out.write("\t\t\t            \tvar chineseActorType = getChineseActorType(actorType);\n");
      out.write("\t\t            \t\treturn chineseActorType;\n");
      out.write("\t\t\t            },'actortype');\n");
      out.write("\t\t            \t//条件路由类型\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t            \t\tif((\"start\" == rowData.activitytype) || (\"end\" == rowData.activitytype)){\n");
      out.write("\t\t            \t\t\treturn \"\";\n");
      out.write("\t\t            \t\t}\n");
      out.write("\t\t\t            \tvar conditionRouteType = rowData['conditionroutetype'];\n");
      out.write("\t\t\t            \tvar chineseActorType = getChineseConditionRouteType(conditionRouteType);\n");
      out.write("\t\t            \t\treturn chineseActorType;\n");
      out.write("\t\t\t            },'conditionroutetype');\n");
      out.write("\t\t            \t//条件路由数值\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t            \t\tif((\"start\" == rowData.activitytype) || (\"end\" == rowData.activitytype)){\n");
      out.write("\t\t            \t\t\treturn \"\";\n");
      out.write("\t\t            \t\t}\n");
      out.write("\t\t\t            \tvar conditionRouteValue = rowData['conditionroutevalue'];\n");
      out.write("\t\t\t            \tvar conditionRouteType = rowData['conditionroutetype'];\n");
      out.write("\t\t\t            \tif(\"pageCallBack\" == conditionRouteType){\n");
      out.write("\t\t\t            \t\treturn \"workflowNextRouteCallBack(buttonText,requestNextRoute)\";\n");
      out.write("\t\t\t            \t}\n");
      out.write("\t\t            \t\treturn conditionRouteValue;\n");
      out.write("\t\t\t            },'conditionroutevalue');\n");
      out.write("\t\t            \t//信息\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t            \t\tvar chineseValues = [];\n");
      out.write("\t\t            \t\tif(value){\n");
      out.write("\t\t            \t\t\tvar values = value.split(\",\");\n");
      out.write("\t\t            \t\t  for(var i= 0;i < values.length;i++){\n");
      out.write("\t\t            \t\t\t  var englishValue = values[i];\n");
      out.write("\t\t            \t\t\t  var chineseValue = \"\";\n");
      out.write("\t\t\t\t            \t  switch(englishValue){\n");
      out.write("\t\t\t\t            \t\t  case \"sms\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"短信\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t\t  case \"mail\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"邮件\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t\t  case \"stationMessage\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"站内信\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t}\n");
      out.write("\t\t\t\t            \tchineseValues.push(chineseValue);\n");
      out.write("\t\t            \t\t  }\n");
      out.write("\t\t            \t\t}\n");
      out.write("\t\t            \t\treturn chineseValues.join(\",\");\n");
      out.write("\t\t\t            },'messagetypes');\n");
      out.write("\t\t            \t//信息\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t            \t\tvar chineseValues = [];\n");
      out.write("\t\t            \t\tif(value){\n");
      out.write("\t\t            \t\t\tvar values = value.split(\",\");\n");
      out.write("\t\t            \t\t  for(var i= 0;i < values.length;i++){\n");
      out.write("\t\t            \t\t\t  var englishValue = values[i];\n");
      out.write("\t\t            \t\t\t  var chineseValue = \"\";\n");
      out.write("\t\t\t\t            \t  switch(englishValue){\n");
      out.write("\t\t\t\t            \t\t  case \"sms\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"短信\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t\t  case \"mail\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"邮件\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t\t  case \"stationMessage\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"站内信\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t}\n");
      out.write("\t\t\t\t            \tchineseValues.push(chineseValue);\n");
      out.write("\t\t            \t\t  }\n");
      out.write("\t\t            \t\t}\n");
      out.write("\t\t            \t\treturn chineseValues.join(\",\");\n");
      out.write("\t\t\t            },'readmessagetypes');\n");
      out.write("\t\t            \t//信息\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t            \t\tvar chineseValues = [];\n");
      out.write("\t\t            \t\tif(value){\n");
      out.write("\t\t            \t\t\tvar values = value.split(\",\");\n");
      out.write("\t\t            \t\t  for(var i= 0;i < values.length;i++){\n");
      out.write("\t\t            \t\t\t  var englishValue = values[i];\n");
      out.write("\t\t            \t\t\t  var chineseValue = \"\";\n");
      out.write("\t\t\t\t            \t  switch(englishValue){\n");
      out.write("\t\t\t\t            \t\t  case \"sms\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"短信\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t\t  case \"mail\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"邮件\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t\t  case \"stationMessage\":{\n");
      out.write("\t\t\t\t            \t\t\t  chineseValue = \"站内信\";\n");
      out.write("\t\t\t\t            \t\t\t  break;\n");
      out.write("\t\t\t\t            \t\t  }\n");
      out.write("\t\t\t\t            \t}\n");
      out.write("\t\t\t\t            \tchineseValues.push(chineseValue);\n");
      out.write("\t\t            \t\t  }\n");
      out.write("\t\t            \t\t}\n");
      out.write("\t\t            \t\treturn chineseValues.join(\",\");\n");
      out.write("\t\t\t            },'signaturemessagetypes');\n");
      out.write("\t\t            \t\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar actorType = rowData['autoreadactortype'];\n");
      out.write("\t\t\t            \tvar chineseActorType = getChineseActorType(actorType);\n");
      out.write("\t\t            \t\treturn chineseActorType;\n");
      out.write("\t\t\t            },'autoreadactortype');\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar actorType = rowData['autosignatureactortype'];\n");
      out.write("\t\t\t            \tvar chineseActorType = getChineseActorType(actorType);\n");
      out.write("\t\t            \t\treturn chineseActorType;\n");
      out.write("\t\t\t            },'autosignatureactortype');\n");
      out.write("\t\t            \t\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar actorType = rowData['actortype'];\n");
      out.write("\t\t\t            \tvar displayValue = rowData['displayactorvalue'];\n");
      out.write("\t\t\t            \tvar hiddenValue = rowData['actorvalue'];\n");
      out.write("\t\t            \t\treturn renderActorValue(actorType,displayValue,hiddenValue);\n");
      out.write("\t\t\t            },'displayactorvalue');\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar actorType = rowData['autoreadactortype'];\n");
      out.write("\t\t\t            \tvar displayValue = rowData['autoreaddisplayactorvalue'];\n");
      out.write("\t\t\t            \tvar hiddenValue = rowData['autoreadactorvalue'];\n");
      out.write("\t\t            \t\treturn renderActorValue(actorType,displayValue,hiddenValue);\n");
      out.write("\t\t\t            },'autoreaddisplayactorvalue');\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar actorType = rowData['autosignatureactortype'];\n");
      out.write("\t\t\t            \tvar displayValue = rowData['autosignaturedisplayactorvalue'];\n");
      out.write("\t\t\t            \tvar hiddenValue = rowData['autosignatureactorvalue'];\n");
      out.write("\t\t            \t\treturn renderActorValue(actorType,displayValue,hiddenValue);\n");
      out.write("\t\t\t            },'autosignaturedisplayactorvalue');\n");
      out.write("\t\t            \t\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar dealMethod = rowData[\"dealmethod\"];\n");
      out.write("\t\t\t            \tvar dealMethodChineseName = \"\";\n");
      out.write("\t\t            \t\tif(\"Single\"==(dealMethod)){dealMethodChineseName=\"单人处理\";};\n");
      out.write("\t\t            \t\tif(\"AllPassed\"==(dealMethod)){dealMethodChineseName=\"多人全部\";};\n");
      out.write("\t\t            \t\tif(\"OnePassed\"==(dealMethod)){dealMethodChineseName=\"多人任一\";};\n");
      out.write("\t\t            \t\tif(\"NPassed\"==(dealMethod)){dealMethodChineseName=\"N人处理\";};\n");
      out.write("\t\t\t            \treturn dealMethodChineseName;\n");
      out.write("\t\t\t            },'dealmethod');\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("                            var realValue = \"\";\n");
      out.write("                            if(\"1\" == value){realValue=\"是\";}\n");
      out.write("                            else if(\"0\" == value){realValue=\"否\";}\n");
      out.write("\t\t\t            \treturn realValue;\n");
      out.write("\t\t\t            },'isneedadvise');\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("                            var realValue = \"\";\n");
      out.write("                            if(\"1\" == value){realValue=\"是\";}\n");
      out.write("                            else if(\"0\" == value){realValue=\"否\";}\n");
      out.write("\t\t\t            \treturn realValue;\n");
      out.write("\t\t\t            },'isautoactivity');\n");
      out.write("\t\t            \tthis.setColumnRenderer(function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t\t\t            \tvar blank = \"&nbsp;\";\n");
      out.write("\t\t\t            \tvar modifyActivities = \"<a href='javascript:void(0);' onclick='javacript:modifyActivity(\"+rowData.rowIndex+\");'>修改</a>\";\n");
      out.write("\t\t\t            \treturn blank+modifyActivities;\n");
      out.write("\t\t\t            },'oper');\n");
      out.write("\t\t\t       }\n");
      out.write("\t\t         });\n");
      out.write("\t           //选择action\n");
      out.write("\t\t\t   var combo_activityAction = new tracywindyComboBox({\n");
      out.write("\t\t\t       dropListHeight:200,\n");
      out.write("\t\t\t       id:'combo_activityAction',\n");
      out.write("\t\t\t       width:352,\n");
      out.write("\t\t\t       renderTo:'id_activityActionContainer',\n");
      out.write("\t\t\t       url:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/getWorkflowActions.action',\n");
      out.write("\t\t\t       loadMode:'ajax',\n");
      out.write("\t\t\t       readOnly:true,\n");
      out.write("\t\t\t       value:'',\n");
      out.write("\t\t\t       displayField:'name',\n");
      out.write("\t\t\t       valueField:'value',\n");
      out.write("\t\t\t       params:{\n");
      out.write("\t\t\t    \t   paramWorkflowName:'-1'\n");
      out.write("\t\t\t       }\n");
      out.write("\t\t\t    }); \n");
      out.write("\t           //选择附件分类\n");
      out.write("\t\t\t   var combo_attachmentType = new tracywindyComboBox({\n");
      out.write("\t\t\t       dropListHeight:200,\n");
      out.write("\t\t\t       id:'combo_attachmentType',\n");
      out.write("\t\t\t       width:352,\n");
      out.write("\t\t\t       renderTo:'id_attachmentTypeContainer',\n");
      out.write("\t\t\t       xmlFileName:'\\\\jbpm\\\\queryAttachmentTypes.xml',\n");
      out.write("\t\t\t       loadMode:'ajax',\n");
      out.write("\t\t\t       readOnly:true,\n");
      out.write("\t\t\t       isCheck:true,\n");
      out.write("\t\t\t       value:'',\n");
      out.write("\t\t\t       displayField:'name',\n");
      out.write("\t\t\t       valueField:'value'\n");
      out.write("\t\t\t    }); \n");
      out.write("\t          //选择退后路由 \n");
      out.write("\t\t\t   var combo_backRoutes = new tracywindyComboBox({\n");
      out.write("\t\t\t       dropListHeight:200,\n");
      out.write("\t\t\t       id:'combo_backRoutes',\n");
      out.write("\t\t\t       width:352,\n");
      out.write("\t\t\t       renderTo:'id_backRoutesContainer',\n");
      out.write("\t\t\t       xmlFileName:'\\\\jbpm\\\\queryWorkflowActivities.xml',\n");
      out.write("\t\t\t       loadMode:'ajax',\n");
      out.write("\t\t\t       readOnly:true,\n");
      out.write("\t\t\t       isCheck:true,\n");
      out.write("\t\t\t       value:'',\n");
      out.write("\t\t\t       displayField:'activityname',\n");
      out.write("\t\t\t       valueField:'activityname',\n");
      out.write("\t\t\t       params:{\n");
      out.write("\t\t\t\t    deployId:'-1'\n");
      out.write("\t\t\t       }\n");
      out.write("\t\t\t    }); \n");
      out.write("\t\t\t //选择处理方式\n");
      out.write("\t\t\t var combo_dealMethod = new tracywindyComboBox({\n");
      out.write("\t\t\t       dropListHeight:200,\n");
      out.write("\t\t\t       id:'combo_dealMethod',\n");
      out.write("\t\t\t       width:160,\n");
      out.write("\t\t\t       renderTo:'id_dealMethodContainer',\n");
      out.write("\t\t\t       loadMode:'local',\n");
      out.write("\t\t\t       readOnly:true,\n");
      out.write("\t\t\t       isContainEmpty:false,\n");
      out.write("\t\t\t       datas:[\n");
      out.write("\t\t\t\t\t        { name:'单人处理',value:'Single'},\n");
      out.write("\t\t\t\t\t        { name:'多人全部',value:'AllPassed'},\n");
      out.write("\t\t\t\t\t        { name:'多人任一',value:'OnePassed'},\n");
      out.write("\t\t\t\t\t        { name:'N人处理',value:'NPassed'}\n");
      out.write("\t\t\t             ],\n");
      out.write("\t\t\t       value:'',\n");
      out.write("\t\t\t       displayField:'name',\n");
      out.write("\t\t\t       valueField:'value',\n");
      out.write("\t\t\t       onSelect:function(combo,rowData){\n");
      out.write("\t\t\t           var value = combo.getValue();\n");
      out.write("\t\t\t           if(\"NPassed\" == value){\n");
      out.write("\t\t\t\t            $(\"td.n-passed-cls\").show();\n");
      out.write("\t\t\t\t       }else{\n");
      out.write("\t\t\t\t    \t    $(\"#id_passedCount\").val(\"\");\n");
      out.write("\t\t\t\t    \t    $(\"td.n-passed-cls\").hide();\n");
      out.write("\t\t\t\t\t   }\n");
      out.write("\t\t\t       }\n");
      out.write("\t\t\t    }); \n");
      out.write("\t\t\t //条件路由\n");
      out.write("\t\t\tvar combo_conditionRouteType = new tracywindyComboBox({\n");
      out.write("\t\t\t       dropListHeight:200,\n");
      out.write("\t\t\t       id:'combo_conditionRouteType',\n");
      out.write("\t\t\t       width:160,\n");
      out.write("\t\t\t       renderTo:'id_conditionRouteTypeContainer',\n");
      out.write("\t\t\t       loadMode:'local',\n");
      out.write("\t\t\t       readOnly:true,\n");
      out.write("\t\t\t       //isContainEmpty:false,\n");
      out.write("\t\t\t       datas:[\n");
      out.write("\t\t\t\t\t        { name:'页面回调函数',value:'pageCallBack'},\n");
      out.write("\t\t\t\t\t        { name:'表单域',value:'field'},\n");
      out.write("\t\t\t\t\t        { name:'表达式',value:'expression'},\n");
      out.write("\t\t\t\t\t        { name:'自定义',value:'sql'}\n");
      out.write("\t\t\t             ],\n");
      out.write("\t\t\t       value:'pageCallBack',\n");
      out.write("\t\t\t       displayField:'name',\n");
      out.write("\t\t\t       valueField:'value',\n");
      out.write("\t\t\t       onSelect:function(combo,rowData){\n");
      out.write("\t\t\t    \t   var conditionRouteType = combo.getValue();\n");
      out.write("\t\t\t\t         if(\"pageCallBack\" == conditionRouteType){\n");
      out.write("\t\t\t\t        \t jQuery(\".need-set-value-cls-conditionRoute\").hide();\n");
      out.write("\t\t\t\t        \t jQuery(\".need-set-value-cls-conditionRoute-label\").show();\n");
      out.write("\t\t\t\t         }else{\n");
      out.write("\t\t\t\t        \t jQuery(\".need-set-value-cls-conditionRoute\").show();\n");
      out.write("\t\t\t\t        \t jQuery(\".need-set-value-cls-conditionRoute-label\").hide();\n");
      out.write("\t\t\t\t         }\n");
      out.write("\t\t\t       }\n");
      out.write("\t\t\t    }); \n");
      out.write("\t\t\t //选择参与人\n");
      out.write("\t\t\t initNodeContainer(\"id_initiatorTypeContainer\",\"id_initiator_display\",\"id_initiator\",\"id_initiator_button\",\"\");\n");
      out.write("\t\t     //选择结束时传阅参与人类型\n");
      out.write("\t\t     initNodeContainer(\"id_autoReadInitiatorTypeContainer\",\"id_autoReadInitiator_display\",\"id_autoReadInitiator\",\"id_autoReadInitiator_button\",\"read\");\n");
      out.write("\t\t     //选择结束时会签参与人类型  \n");
      out.write("\t\t     initNodeContainer(\"id_autoSignatureInitiatorTypeContainer\",\"id_autoSignatureInitiator_display\",\"id_autoSignatureInitiator\",\"id_autoSignatureInitiator_button\",\"signature\");\n");
      out.write("\t\t });\n");
      out.write("\t\t function initNodeContainer(initiatorTypeContainer,initiatorDisplayId,initiatorHiddenId,choseButtonId,attachmentId)\n");
      out.write("\t\t {\n");
      out.write("\t\t\t  new tracywindyCommonUserSelection({\n");
      out.write("\t\t\t\t    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("\t\t\t\t    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("\t\t\t\t    isMultiSelect:true,\n");
      out.write("\t\t\t\t    draggable:false,\n");
      out.write("\t\t\t\t    windowTop:1,\n");
      out.write("\t\t\t\t    id:'id_user'+attachmentId,\n");
      out.write("\t\t\t\t    type:'user'\n");
      out.write("\t\t\t   });\n");
      out.write("\t\t\t  new tracywindyCommonUserSelection({\n");
      out.write("\t\t\t\t    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("\t\t\t\t    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("\t\t\t\t    isMultiSelect:true,\n");
      out.write("\t\t\t\t    draggable:false,\n");
      out.write("\t\t\t\t    windowTop:1,\n");
      out.write("\t\t\t\t    id:'id_requestInitiatorRelation'+attachmentId,\n");
      out.write("\t\t\t\t    type:'relation'\n");
      out.write("\t\t\t   });\n");
      out.write("\t\t\t  new tracywindyCommonUserSelection({\n");
      out.write("\t\t\t\t    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("\t\t\t\t    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("\t\t\t\t    isMultiSelect:true,\n");
      out.write("\t\t\t\t    draggable:false,\n");
      out.write("\t\t\t\t    windowTop:1,\n");
      out.write("\t\t\t\t    id:'id_submitRelation'+attachmentId,\n");
      out.write("\t\t\t\t    type:'relation'\n");
      out.write("\t\t\t   });\n");
      out.write("              //关系2，从已定义的关系的中选择\n");
      out.write("               new tracywindyCommonUserSelection({\n");
      out.write("                    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("                    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("                    isMultiSelect:true,\n");
      out.write("                    draggable:false,\n");
      out.write("                    windowTop:1,\n");
      out.write("                    id:'id_requestInitiatorDefinedRelation'+attachmentId,\n");
      out.write("                    type:'definedRelation'\n");
      out.write("               });\n");
      out.write("              new tracywindyCommonUserSelection({\n");
      out.write("                    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("                    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("                    isMultiSelect:true,\n");
      out.write("                    draggable:false,\n");
      out.write("                    windowTop:1,\n");
      out.write("                    id:'id_submitDefinedRelation'+attachmentId,\n");
      out.write("                    type:'definedRelation'\n");
      out.write("              });\n");
      out.write("\t\t\t  new tracywindyCommonUserSelection({\n");
      out.write("\t\t\t\t    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("\t\t\t\t    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("\t\t\t\t    isMultiSelect:true,\n");
      out.write("\t\t\t\t    draggable:false,\n");
      out.write("\t\t\t\t    windowTop:1,\n");
      out.write("\t\t\t\t    id:'id_dept'+attachmentId,\n");
      out.write("\t\t\t\t    type:'dept'\n");
      out.write("\t\t\t   });\n");
      out.write("\t\t\t  new tracywindyCommonUserSelection({\n");
      out.write("\t\t\t\t    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("\t\t\t\t    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("\t\t\t\t    isMultiSelect:true,\n");
      out.write("\t\t\t\t    draggable:false,\n");
      out.write("\t\t\t\t    windowTop:1,\n");
      out.write("\t\t\t\t    id:'id_deptRole'+attachmentId,\n");
      out.write("\t\t\t\t    type:'deptRole'\n");
      out.write("\t\t\t   });\n");
      out.write("\t\t\t  new tracywindyCommonUserSelection({\n");
      out.write("\t\t\t\t    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("\t\t\t\t    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("\t\t\t\t    isMultiSelect:true,\n");
      out.write("\t\t\t\t    draggable:false,\n");
      out.write("\t\t\t\t    windowTop:1,\n");
      out.write("\t\t\t\t    id:'id_group'+attachmentId,\n");
      out.write("\t\t\t\t    type:'group'\n");
      out.write("\t\t\t   });\n");
      out.write("\t\t\t  new tracywindyCommonUserSelection({\n");
      out.write("\t\t\t\t    hiddenInput:initiatorHiddenId||'id_initiator_display',\n");
      out.write("\t\t\t\t    displayInput:initiatorDisplayId||'id_initiator',\n");
      out.write("\t\t\t\t    isMultiSelect:true,\n");
      out.write("\t\t\t\t    draggable:false,\n");
      out.write("\t\t\t\t    windowTop:1,\n");
      out.write("\t\t\t\t    id:'id_step'+attachmentId,\n");
      out.write("\t\t\t\t    type:'step',\n");
      out.write("\t\t\t\t    params:{\n");
      out.write("\t\t\t\t\t\tdeployId:'-1',\n");
      out.write("\t\t   \t\t\t    currentActivityDetailId:'-1'\n");
      out.write("\t\t\t\t    }\n");
      out.write("\t\t\t   });\n");
      out.write("\t\t\t //选择节点参与人类型\n");
      out.write("\t\t\t var combo_initiatorType = new tracywindyComboBox({\n");
      out.write("\t\t\t       dropListHeight:280,\n");
      out.write("\t\t\t       id:'combo_initiatorType'+attachmentId,\n");
      out.write("\t\t\t       width:160,\n");
      out.write("\t\t\t       renderTo:initiatorTypeContainer||'id_initiatorTypeContainer',\n");
      out.write("\t\t\t       loadMode:'local',\n");
      out.write("\t\t\t       readOnly:true,\n");
      out.write("\t\t\t       isContainEmpty:!!attachmentId,\n");
      out.write("\t\t\t       datas:[\n");
      out.write("\t\t\t\t\t        { name:'流程发起人',value:'requestInitiator'},\n");
      out.write("\t\t\t\t\t        { name:'指定人员',value:'user'},\n");
      out.write("\t\t\t\t\t        { name:'发起人关系',value:'requestInitiatorRelation'},\n");
      out.write("\t\t\t\t\t        { name:'提交人关系',value:'submitRelation'},\n");
      out.write("                            { name:'预定义的发起人关系', value:'requestInitiatorDefinedRelation'},\n");
      out.write("                            { name:'预定义的提交人关系', value:'submitDefinedRelation'},\n");
      out.write("\t\t\t\t\t        { name:'部门',value:'dept'},\n");
      out.write("\t\t\t\t\t        { name:'角色',value:'deptRole'},\n");
      out.write("\t\t\t\t\t        { name:'群组',value:'group'},\n");
      out.write("\t\t\t\t\t        { name:'历史步骤',value:'step'},\n");
      out.write("\t\t\t\t\t        { name:'表单域',value:'formField'},\n");
      out.write("\t\t\t\t\t        { name:'自定义',value:'sql'}\n");
      out.write("\t\t\t             ],\n");
      out.write("\t\t\t       value:'',\n");
      out.write("\t\t\t       displayField:'name',\n");
      out.write("\t\t\t       valueField:'value',\n");
      out.write("\t\t\t       onSelect:function(combo,rowData){\n");
      out.write("\t\t\t          var value = combo.getValue();\n");
      out.write("\t\t\t          var rawValue = combo.getRawValue();\n");
      out.write("\t\t\t          $(\"#\"+initiatorHiddenId).val(\"\");\n");
      out.write("\t\t\t          $(\"#\"+initiatorDisplayId).val(\"\");\n");
      out.write("\t\t\t          initNodeInitiator(value,rawValue,initiatorTypeContainer,initiatorDisplayId,initiatorHiddenId,choseButtonId,attachmentId);\n");
      out.write("\t\t\t       }\n");
      out.write("\t\t\t    }); \n");
      out.write("\t    }\n");
      out.write("\t\tfunction initNodeInitiator(value,rawValue,initiatorTypeContainer,initiatorDisplayId,initiatorHiddenId,choseButtonId,attachmentId){\n");
      out.write("\t\t\t   var $choseButton = $(\"#\"+(choseButtonId||\"id_initiator_button\"));\n");
      out.write("\t\t\t   switch(value){\n");
      out.write("\t\t          case \"requestInitiator\":\n");
      out.write("\t\t          case \"user\":\n");
      out.write("\t\t          case \"requestInitiatorRelation\":\n");
      out.write("\t\t          case \"submitRelation\":\n");
      out.write("                  case \"requestInitiatorDefinedRelation\":\n");
      out.write("                  case \"submitDefinedRelation\":\n");
      out.write("\t\t          case \"dept\":\n");
      out.write("\t\t          case \"deptRole\":\n");
      out.write("\t\t          case \"group\":\n");
      out.write("\t\t          case \"step\":{\n");
      out.write("\t\t\t          $(\"#\"+initiatorHiddenId).hide();\n");
      out.write("\t\t\t          $(\"#\"+initiatorDisplayId).attr(\"readOnly\",true);\n");
      out.write("\t\t\t          $(\"#\"+initiatorDisplayId).show();\n");
      out.write("\t\t\t          $(\"tr.need-set-value-cls-\"+attachmentId).show();\n");
      out.write("\t\t\t          if(\"requestInitiator\"==value){\n");
      out.write("\t\t\t        \t  $(\"tr.need-set-value-cls-\"+attachmentId).hide();\n");
      out.write("\t\t\t\t      }\n");
      out.write("\t\t        \t  $choseButton.show();\n");
      out.write("\t\t\t          $choseButton.html(\"选择 \"+rawValue);\n");
      out.write("\t\t\t          $choseButton[0].onclick=(function(value){\n");
      out.write("\t\t\t\t          return function(e){\n");
      out.write("\t\t\t\t        \t getTracywindyObject('id_'+value+attachmentId).show();\n");
      out.write("\t\t\t\t\t      };\n");
      out.write("\t\t\t\t      })(value);\n");
      out.write("\t\t\t          break;\n");
      out.write("\t\t\t      }\n");
      out.write("\t\t\t      default:{\n");
      out.write("\t\t\t    \t  $(\"tr.need-set-value-cls-\"+attachmentId).show();\n");
      out.write("\t\t\t          $(\"#\"+initiatorHiddenId).show();\n");
      out.write("\t\t\t          $(\"#\"+initiatorDisplayId).attr(\"readOnly\",false);\n");
      out.write("\t\t\t          $(\"#\"+initiatorDisplayId).hide();\n");
      out.write("\t\t\t    \t  $choseButton.hide();\n");
      out.write("\t\t\t\t  }\n");
      out.write("\t          }\n");
      out.write("\t\t}\n");
      out.write("\t\tfunction modifyActivity(rowIndex)\n");
      out.write("\t\t{\n");
      out.write("\t\t\t var rowData = getTracywindyObject('id_workflow_activity_detail_table').getRowDataAt(rowIndex);\n");
      out.write("\t\t\t var id = rowData['id'];\n");
      out.write("\t\t\t var deployid = rowData['deploymentimpl'];\n");
      out.write("\t\t\t var workflowName = rowData['workflowname'];\n");
      out.write("\t\t\t var activityType = rowData['activitytype'];\n");
      out.write("\t\t\t var activityName = rowData['activityname'];\n");
      out.write("\t\t\t //var initiatorType = rowData['actortype'];\n");
      out.write("\t\t\t //执行人\n");
      out.write("\t\t\t var initiator = (rowData['actorvalue']||\"\").replace(/\\\\n/g,\"\\r\\n\");\n");
      out.write("\t\t\t var displayInitiator = rowData['displayactorvalue'];\n");
      out.write("\t\t\t var initiatorType = rowData['actortype'];\n");
      out.write("\t\t\t //自动传阅\n");
      out.write("\t\t\t var autoSignatureInitiator     = (rowData['autosignatureactorvalue']||\"\").replace(/\\\\n/g,\"\\r\\n\");\n");
      out.write("\t\t\t var autoSignatureDisplayInitiator     = rowData['autosignaturedisplayactorvalue'];\n");
      out.write("\t\t\t var autoSignatureInitiatorType = rowData['autosignatureactortype'];\n");
      out.write("\t\t\t //条件路由\n");
      out.write("\t\t\t var conditionRouteType    = rowData['conditionroutetype'];\n");
      out.write("\t\t\t var conditionRouteValue   = rowData['conditionroutevalue'];\n");
      out.write("\t\t\t //信息\n");
      out.write("\t\t\t var messageTypes    = rowData['messagetypes'];\n");
      out.write("\t\t\t var messageContent  = rowData['messagecontent'];\n");
      out.write("\t\t\t var readMessageTypes    = rowData['readmessagetypes'];\n");
      out.write("\t\t\t var readMessageContent  = rowData['readmessagecontent'];\n");
      out.write("\t\t\t var signatureMessageTypes    = rowData['signaturemessagetypes'];\n");
      out.write("\t\t\t var signatureMessageContent  = rowData['signaturemessagecontent'];\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t//自动会签\n");
      out.write("\t\t\t var autoReadInitiator     = (rowData['autoreadactorvalue']||\"\").replace(/\\\\n/g,\"\\r\\n\");\n");
      out.write("\t\t\t var autoReadDisplayInitiator     = rowData['autoreaddisplayactorvalue'];\n");
      out.write("\t\t\t var autoReadInitiatorType = rowData['autoreadactortype'];\n");
      out.write("\t\t\t //表单\n");
      out.write("\t\t\t var formPath        = rowData['formpath'];\n");
      out.write("\t\t\t var formTitle       = rowData['formtitle'];\n");
      out.write("\t\t\t //Action\n");
      out.write("\t\t\t var activityAction  = rowData['activityaction'];\n");
      out.write("\t\t\t //附件\n");
      out.write("\t\t\t var attachmentType  = rowData['attachmenttype'];\n");
      out.write("\t\t\t //提交按钮\n");
      out.write("\t\t\t var submitButtons   = rowData['operationbuttons'];\n");
      out.write("\t\t\t //是否需要填写意见\n");
      out.write("\t\t\t var isNeedAdvise    = rowData['isneedadvise'];\n");
      out.write("\t\t\t //手否检查附件\n");
      out.write("\t\t\t var isAttachmentChecked = rowData['isattachmentchecked'];\n");
      out.write("\t\t\t //是否是自动节点\n");
      out.write("\t\t\t var isAutoActivity  = rowData['isautoactivity'];\n");
      out.write("\t\t\t //退后按钮\n");
      out.write("\t\t\t var backRoutesNodes = rowData['backactivities'];\n");
      out.write("\t\t\t //处理方式\n");
      out.write("\t\t\t var dealMethod      = rowData['dealmethod'];\n");
      out.write("\t\t\t var passedCount     = rowData['passedcount'];\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t var currentCheckedRadio = jQuery(\"input[type='radio'][name='isNeedAdvise'][value='\"+isNeedAdvise+\"']\")[0];\n");
      out.write("\t\t\t if(currentCheckedRadio)\n");
      out.write("\t\t\t {\n");
      out.write("\t\t\t\t currentCheckedRadio.checked = true;\n");
      out.write("\t\t     }\n");
      out.write("\t\t\t else\n");
      out.write("\t\t\t {\n");
      out.write("\t\t\t\t jQuery(\"input[type='radio'][name='isNeedAdvise']\")[1].checked=true;\n");
      out.write("\t\t\t }\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t var currentCheckedAttachmentRadio = jQuery(\"input[type='radio'][name='isAttachmentChecked'][value='\"+isAttachmentChecked+\"']\")[0];\n");
      out.write("\t\t\t if(currentCheckedAttachmentRadio)\n");
      out.write("\t\t\t {\n");
      out.write("\t\t\t\t currentCheckedAttachmentRadio.checked = true;\n");
      out.write("\t\t     }\n");
      out.write("\t\t\t else\n");
      out.write("\t\t\t {\n");
      out.write("\t\t\t\t jQuery(\"input[type='radio'][name='isAttachmentChecked']\")[1].checked=true;\n");
      out.write("\t\t\t }\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t var currentCheckedAutoActivityRadio = jQuery(\"input[type='radio'][name='isAutoActivity'][value='\"+isAutoActivity+\"']\")[0];\n");
      out.write("\t\t\t if(currentCheckedAutoActivityRadio)\n");
      out.write("\t\t\t {\n");
      out.write("\t\t\t\t currentCheckedAutoActivityRadio.checked = true;\n");
      out.write("\t\t     }\n");
      out.write("\t\t\t else\n");
      out.write("\t\t\t {\n");
      out.write("\t\t\t\t jQuery(\"input[type='radio'][name='isAutoActivity']\")[1].checked=true;\n");
      out.write("\t\t\t }\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t jQuery(\"#id_recordId\").val(id);\n");
      out.write("\t\t\t jQuery(\"#id_deployId\").val(deployid);\n");
      out.write("\t\t\t jQuery(\"#id_activityType\").html(activityType);\n");
      out.write("\t\t\t jQuery(\"#id_activityName\").html(activityName);\n");
      out.write("\t\t\t //参与人\n");
      out.write("\t\t\t jQuery(\"#id_initiator\").val(initiator);\n");
      out.write("\t\t\t jQuery(\"#id_initiator_display\").val(displayInitiator);\n");
      out.write("\t\t\t //条件路由\n");
      out.write("\t\t\t jQuery(\"#id_conditionRouteValue\").val(conditionRouteValue);\n");
      out.write("\t\t\t //信息\n");
      out.write("\t\t\t jQuery(\"#id_messageContent\").val(messageContent);\n");
      out.write("\t\t\t setMessageTypes(messageTypes);\n");
      out.write("\t\t\t jQuery(\"#id_readMessageContent\").val(readMessageContent);\n");
      out.write("\t\t\t setReadMessageTypes(readMessageTypes);\n");
      out.write("\t\t\t jQuery(\"#id_signatureMessageContent\").val(signatureMessageContent);\n");
      out.write("\t\t\t setSignatureMessageTypes(signatureMessageTypes);\n");
      out.write("\t\t\t //自动会签\n");
      out.write("\t\t\t jQuery(\"#id_autoSignatureInitiator\").val(autoSignatureInitiator);\n");
      out.write("\t\t\t jQuery(\"#id_autoSignatureInitiator_display\").val(autoSignatureDisplayInitiator);\n");
      out.write("\t\t\t //自动传阅\n");
      out.write("\t\t\t jQuery(\"#id_autoReadInitiator\").val(autoReadInitiator);\n");
      out.write("\t\t\t jQuery(\"#id_autoReadInitiator_display\").val(autoReadDisplayInitiator);\n");
      out.write("\n");
      out.write("\t\t\t //表单\n");
      out.write("\t\t\t jQuery(\"#id_formPath\").val(formPath);\n");
      out.write("\t\t\t jQuery(\"#id_formTitle\").val(formTitle);\n");
      out.write("\t\t\t setOperationButtons(submitButtons);\n");
      out.write("\t\t\t //设置处理方式\n");
      out.write("\t\t\t jQuery(\"#id_passedCount\").val(passedCount);\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t var combo_activityAction = getTracywindyObject('combo_activityAction');\n");
      out.write("\t\t\t var combo_attachmentType = getTracywindyObject('combo_attachmentType');\n");
      out.write("\t\t\t var combo_backRoutes     = getTracywindyObject('combo_backRoutes');\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t var combo_initiatorType     = getTracywindyObject('combo_initiatorType');\n");
      out.write("\t\t\t var combo_autoReadInitiatorType     = getTracywindyObject('combo_initiatorTyperead');\n");
      out.write("\t\t\t var combo_autoSignatureInitiatorType     = getTracywindyObject('combo_initiatorTypesignature');\n");
      out.write("\t\t\t var combo_dealMethod     = getTracywindyObject('combo_dealMethod');\n");
      out.write("\t\t\t \n");
      out.write("\t\t\t //条件路由\n");
      out.write("             var combo_conditionRouteType = getTracywindyObject('combo_conditionRouteType');\n");
      out.write("\t\t\t //信息\n");
      out.write("             if((\"start\"==activityType)||((\"end\"==activityType)))\n");
      out.write("             {\n");
      out.write("            \t jQuery(\"#id_initiator_display\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"#id_autoSignatureInitiator\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"#id_autoSignatureInitiator_display\")[0].disabled = true;\n");
      out.write("            \t if(\"end\"==activityType){\n");
      out.write("                \t jQuery(\"#id_autoReadInitiator\")[0].disabled = false;\n");
      out.write("                \t jQuery(\"#id_autoReadInitiator_display\")[0].disabled = false;\n");
      out.write("            \t }else{\n");
      out.write("                \t jQuery(\"#id_autoReadInitiator\")[0].disabled = true;\n");
      out.write("                \t jQuery(\"#id_autoReadInitiator_display\")[0].disabled = true;\n");
      out.write("            \t }\n");
      out.write("            \t jQuery(\"#id_formPath\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"#id_formTitle\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"#id_passedCount\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"input[name='submitButtons']\").attr(\"disabled\",\"disabled\");\n");
      out.write("            \t jQuery(\"input[type='radio'][name='isNeedAdvise']\").attr(\"disabled\",\"disabled\");\n");
      out.write("            \t jQuery(\"input[type='radio'][name='isAttachmentChecked']\").attr(\"disabled\",\"disabled\");\n");
      out.write("            \t jQuery(\"input[type='radio'][name='isAutoActivity']\").attr(\"disabled\",\"disabled\");\n");
      out.write("            \t //信息\n");
      out.write("            \t jQuery(\"#id_messageContent\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"input[name='messageTypes']\").attr(\"disabled\",\"disabled\");\n");
      out.write("            \t jQuery(\"#id_readMessageContent\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"input[name='readMessageTypes']\").attr(\"disabled\",\"disabled\");\n");
      out.write("            \t jQuery(\"#id_signatureMessageContent\")[0].disabled = true;\n");
      out.write("            \t jQuery(\"input[name='signatureMessageTypes']\").attr(\"disabled\",\"disabled\");\n");
      out.write("            \t \n");
      out.write("            \t combo_attachmentType.readOnlyData = true;\n");
      out.write("            \t combo_backRoutes.readOnlyData = true;\n");
      out.write("            \t combo_initiatorType.readOnlyData = true;\n");
      out.write("            \t if(\"end\"==activityType){\n");
      out.write("    \t\t\t    combo_autoReadInitiatorType.readOnlyData = false;\n");
      out.write("            \t }else{\n");
      out.write("            \t\t combo_autoReadInitiatorType.readOnlyData = true;\n");
      out.write("            \t }\n");
      out.write("    \t\t\t combo_autoSignatureInitiatorType.readOnlyData = true;\n");
      out.write("    \t\t\t combo_dealMethod.readOnlyData = true;\n");
      out.write("    \t\t\t combo_conditionRouteType.readOnlyData = true;\n");
      out.write("             }\n");
      out.write("             else\n");
      out.write("             {\n");
      out.write("            \t jQuery(\"#id_initiator\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_initiator_display\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_autoSignatureInitiator\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_autoSignatureInitiator_display\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_autoReadInitiator\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_autoReadInitiator_display\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_formPath\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_formTitle\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"#id_passedCount\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"input[name='submitButtons']\").removeAttr(\"disabled\");\n");
      out.write("            \t //信息\n");
      out.write("            \t jQuery(\"#id_messageContent\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"input[name='messageTypes']\").removeAttr(\"disabled\");\n");
      out.write("            \t jQuery(\"#id_readMessageContent\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"input[name='readMessageTypes']\").removeAttr(\"disabled\");\n");
      out.write("            \t jQuery(\"#id_signatureMessageContent\")[0].disabled = false;\n");
      out.write("            \t jQuery(\"input[name='signatureMessageTypes']\").removeAttr(\"disabled\");\n");
      out.write("            \t \n");
      out.write("            \t jQuery(\"input[type='radio'][name='isNeedAdvise']\").removeAttr(\"disabled\");\n");
      out.write("            \t jQuery(\"input[type='radio'][name='isAttachmentChecked']\").removeAttr(\"disabled\");\n");
      out.write("            \t jQuery(\"input[type='radio'][name='isAutoActivity']\").removeAttr(\"disabled\");\n");
      out.write("            \t combo_attachmentType.readOnlyData = false;\n");
      out.write("            \t combo_backRoutes.readOnlyData = false;\n");
      out.write("            \t combo_initiatorType.readOnlyData = false;\n");
      out.write("    \t\t\t combo_autoReadInitiatorType.readOnlyData = false;\n");
      out.write("    \t\t\t combo_autoSignatureInitiatorType.readOnlyData = false;\n");
      out.write("    \t\t\t combo_dealMethod.readOnlyData = false;\n");
      out.write("    \t\t\t combo_conditionRouteType.readOnlyData = false;\n");
      out.write("             }\n");
      out.write("\t         //设置参与人\n");
      out.write("             combo_initiatorType.setValue(initiatorType);\n");
      out.write("\t\t\t combo_autoReadInitiatorType.setValue(autoReadInitiatorType);\n");
      out.write("\t\t\t combo_autoSignatureInitiatorType.setValue(autoSignatureInitiatorType);\n");
      out.write("\t\t\t combo_dealMethod.setValue(dealMethod);\n");
      out.write("        \t combo_initiatorType.reload();\n");
      out.write("\t\t\t combo_autoReadInitiatorType.reload();\n");
      out.write("\t\t\t combo_autoSignatureInitiatorType.reload();\n");
      out.write("\t\t\t combo_dealMethod.reload();\n");
      out.write("\t         //设置条件路由\n");
      out.write("\t         combo_conditionRouteType.setValue(conditionRouteType);\n");
      out.write("\t         combo_conditionRouteType.reload();\n");
      out.write("\t         if(\"pageCallBack\" == conditionRouteType){\n");
      out.write("\t        \t jQuery(\".need-set-value-cls-conditionRoute\").hide();\n");
      out.write("\t        \t jQuery(\".need-set-value-cls-conditionRoute-label\").show();\n");
      out.write("\t         }else{\n");
      out.write("\t        \t jQuery(\".need-set-value-cls-conditionRoute\").show();\n");
      out.write("\t        \t jQuery(\".need-set-value-cls-conditionRoute-label\").hide();\n");
      out.write("\t         }\n");
      out.write("             //设置节点Action\n");
      out.write("\t\t\t combo_activityAction.setParams({\n");
      out.write("\t\t\t\t paramWorkflowName:workflowName\n");
      out.write("\t\t     });\n");
      out.write("\t\t\t combo_activityAction.setRawValue('');\n");
      out.write("\t\t\t combo_activityAction.loadComplete=function(){\n");
      out.write("\t\t\t\t this.setValue(activityAction);\n");
      out.write("\t\t    };\n");
      out.write("\t\t\t combo_activityAction.reload();\n");
      out.write("\t\t    //设置附件类型\n");
      out.write("\t\t\tcombo_attachmentType.setRawValue('');\n");
      out.write("\t\t\tcombo_attachmentType.loadComplete=function(){\n");
      out.write("\t\t\t\tthis.setRawValue(attachmentType);\n");
      out.write("\t\t    };\n");
      out.write("\t\t\tcombo_attachmentType.reload();\n");
      out.write("\t\t    //设置退回路由\n");
      out.write("\t\t\tcombo_backRoutes.setParams({\n");
      out.write("\t\t\t\t  deployId:deployid\n");
      out.write("\t\t     });\n");
      out.write("\t\t\t combo_backRoutes.loadComplete=function(){\n");
      out.write("\t\t\t\t this.setRawValue(backRoutesNodes);\n");
      out.write("\t\t    };\n");
      out.write("\t\t\t combo_backRoutes.reload();\n");
      out.write("\t\t\t //初始化设置\n");
      out.write("\t\t\t if(\"NPassed\" == dealMethod){\n");
      out.write("\t\t\t\t $(\"td.n-passed-cls\").show();\n");
      out.write("\t\t\t }else{\n");
      out.write("\t\t\t\t $(\"td.n-passed-cls\").hide();\n");
      out.write("\t\t\t }\n");
      out.write("\t\t\t //选择参与人\n");
      out.write("\t\t\t initNodeInitiator(combo_initiatorType.getValue(),combo_initiatorType.getRawValue(),\"id_initiatorTypeContainer\",\"id_initiator_display\",\"id_initiator\",\"id_initiator_button\",\"\");\n");
      out.write("\t\t     //选择结束时传阅参与人类型\n");
      out.write("\t\t     initNodeInitiator(combo_autoReadInitiatorType.getValue(),combo_autoReadInitiatorType.getRawValue(),\"id_autoReadInitiatorTypeContainer\",\"id_autoReadInitiator_display\",\"id_autoReadInitiator\",\"id_autoReadInitiator_button\",\"read\");\n");
      out.write("\t\t     //选择结束时会签参与人类型  \n");
      out.write("\t\t     initNodeInitiator(combo_autoSignatureInitiatorType.getValue(),combo_autoSignatureInitiatorType.getRawValue(),\"id_autoSignatureInitiatorTypeContainer\",\"id_autoSignatureInitiator_display\",\"id_autoSignatureInitiator\",\"id_autoSignatureInitiator_button\",\"signature\");\n");
      out.write("\t\t    //设置选择历史步骤\n");
      out.write("\t\t    var params = {\n");
      out.write("\t\t\t    \tdeployId:deployid,\n");
      out.write("\t\t\t\t    currentActivityDetailId:id\n");
      out.write("\t\t\t};\n");
      out.write("\t\t    var stepSelection = getTracywindyObject('id_step');\n");
      out.write("\t\t    stepSelection.setParams(params);\n");
      out.write("\t\t    stepSelection.reload();\n");
      out.write("\t\t    var stepSelectionRead = getTracywindyObject('id_step'+\"read\");\n");
      out.write("\t\t    stepSelectionRead.setParams(params);\n");
      out.write("\t\t    stepSelectionRead.reload();\n");
      out.write("\t\t    var stepSelectionSignature = getTracywindyObject('id_step'+\"signature\");\n");
      out.write("\t\t    stepSelectionSignature.setParams(params);\n");
      out.write("\t\t    stepSelectionSignature.reload();\n");
      out.write("            \n");
      out.write("            jQuery(\"#id_workflow_activity_setting\").show();\n");
      out.write("\t\t\tvar cwin = jQuery(\"#id_workflow_activity_setting\").dialog({\n");
      out.write("\t\t              \ttop:5,\n");
      out.write("\t\t              \tzIndex:9999999,\n");
      out.write("\t\t              \ttitle:\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; < \"+activityName+\" > 节点设置\",\n");
      out.write("\t\t              \tdraggable:true,\n");
      out.write("\t\t              \tresizable:false,\n");
      out.write("\t\t              \tshadow:true,\n");
      out.write("\t\t              \tmodal:false,\n");
      out.write("\t\t              \tinline:false,\n");
      out.write("\t\t              \tcollapsible:false,\n");
      out.write("\t\t              \tminimizable:false,\n");
      out.write("\t\t              \tmaximizable:false,\n");
      out.write("\t\t              \tclosable:true,\n");
      out.write("\t\t              \tclosed:false\n");
      out.write("\t              });\n");
      out.write("\t          cwin.dialog(\"open\");\n");
      out.write("\t     }\n");
      out.write("\t     function saveChangeToActivity()\n");
      out.write("\t     {\n");
      out.write("\t    \t  var activityName = jQuery(\"#id_activityName\").html();\n");
      out.write("\t\t\t  if(window.confirm(\"确认修改节点（ \"+activityName+\"）的信息么？\"))\n");
      out.write("\t\t\t  {\n");
      out.write("\t\t\t\t\t\t loadMask.show();\n");
      out.write("\t\t\t\t\t\t var id = jQuery(\"#id_recordId\").val();\n");
      out.write("\t\t\t\t\t\t var deployid = jQuery(\"#id_deployId\").val();\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t var combo_initiatorType     = getTracywindyObject('combo_initiatorType');\n");
      out.write("\t\t\t\t\t\t var combo_autoReadInitiatorType     = getTracywindyObject('combo_initiatorTyperead');\n");
      out.write("\t\t\t\t\t\t var combo_autoSignatureInitiatorType     = getTracywindyObject('combo_initiatorTypesignature');\n");
      out.write("\t\t\t\t\t\t var combo_dealMethod     = getTracywindyObject('combo_dealMethod');\n");
      out.write("\t\t\t\t\t\t var combo_conditionRouteType =  getTracywindyObject('combo_conditionRouteType');\n");
      out.write("\t\t\t\t\t\t \n");
      out.write("\t\t\t\t\t\t var initiatorType = combo_initiatorType.getValue();\n");
      out.write("\t\t\t\t\t\t var initiator = jQuery(\"#id_initiator\").val();\n");
      out.write("\t\t\t\t\t\t var conditionRouteType = combo_conditionRouteType.getValue();\n");
      out.write("\t\t\t\t\t\t var conditionRouteValue = jQuery(\"#id_conditionRouteValue\").val();\n");
      out.write("\t\t\t\t\t\t var displayInitiator = jQuery(\"#id_initiator_display\").val();\n");
      out.write("\t\t\t\t\t\t var autoSignatureInitiatorType = combo_autoSignatureInitiatorType.getValue();\n");
      out.write("\t\t\t\t\t\t var autoSignatureInitiator = jQuery(\"#id_autoSignatureInitiator\").val();\n");
      out.write("\t\t\t\t\t\t var autoSignatureDisplayInitiator = jQuery(\"#id_autoSignatureInitiator_display\").val();\n");
      out.write("\t\t\t\t\t\t var autoReadInitiatorType = combo_autoReadInitiatorType.getValue();\n");
      out.write("\t\t\t\t\t\t var autoReadInitiator = jQuery(\"#id_autoReadInitiator\").val();\n");
      out.write("\t\t\t\t\t\t var autoReadDisplayInitiator = jQuery(\"#id_autoReadInitiator_display\").val();\n");
      out.write("\t\t\t\t\t\t \n");
      out.write("\t\t\t\t\t\t var dealMethod = combo_dealMethod.getValue();\n");
      out.write("\t\t\t\t\t\t var passedCount = jQuery(\"#id_passedCount\").val();\n");
      out.write("\t\t\t\t\t\t var activityAction = getTracywindyObject('combo_activityAction').getValue();\n");
      out.write("\t\t\t\t\t\t var attachmentType = getTracywindyObject('combo_attachmentType').getRawValue();\n");
      out.write("\t\t\t\t\t\t var attachmentTypeIds = getTracywindyObject('combo_attachmentType').getValue();\n");
      out.write("\t\t\t\t\t\t var formPath = jQuery(\"#id_formPath\").val();\n");
      out.write("\t\t\t\t\t\t var formTitle = jQuery(\"#id_formTitle\").val();\n");
      out.write("\t\t\t\t\t\t var submitButtons  = getOperationButtons();\n");
      out.write("\t\t\t\t\t\t var isNeedAdvise   = jQuery(\"input[type='radio'][name='isNeedAdvise']:checked\").val();\n");
      out.write("\t\t\t\t\t\t var isAttachmentChecked   = jQuery(\"input[type='radio'][name='isAttachmentChecked']:checked\").val();\n");
      out.write("\t\t\t\t\t\t var isAutoActivity = jQuery(\"input[type='radio'][name='isAutoActivity']:checked\").val();\n");
      out.write("\t\t\t\t\t\t var backRoutesNodes = getTracywindyObject('combo_backRoutes').getRawValue();\n");
      out.write("\t\t\t\t\t\t //信息\n");
      out.write("\t\t\t\t\t\t var messageTypes   = getMessageTypes();\n");
      out.write("\t\t\t\t\t\t var messageContent = jQuery(\"#id_messageContent\").val();\n");
      out.write("\t\t\t\t\t\t var readMessageTypes   = getReadMessageTypes();\n");
      out.write("\t\t\t\t\t\t var readMessageContent = jQuery(\"#id_readMessageContent\").val();\n");
      out.write("\t\t\t\t\t\t var signatureMessageTypes   = getSignatureMessageTypes();\n");
      out.write("\t\t\t\t\t\t var signatureMessageContent = jQuery(\"#id_signatureMessageContent\").val();\n");
      out.write("\t\t\t\t\t\t \n");
      out.write("\t\t            \t jQuery(\"input[name='messageTypes']\").removeAttr(\"disabled\");\n");
      out.write("\t\t\t\t\t\t var params={\n");
      out.write("\t\t\t\t\t\t\tid:id,\n");
      out.write("\t\t\t\t\t\t\tactorType:initiatorType,\n");
      out.write("\t\t\t\t\t\t\tactorValue:initiator,\n");
      out.write("\t\t\t\t\t\t\tconditionRouteType:conditionRouteType,\n");
      out.write("\t\t\t\t\t\t\tconditionRouteValue:conditionRouteValue,\n");
      out.write("\t\t\t\t\t\t\tmessageTypes:messageTypes,\n");
      out.write("\t\t\t\t\t\t\tmessageContent:messageContent,\n");
      out.write("\t\t\t\t\t\t\treadMessageTypes:readMessageTypes,\n");
      out.write("\t\t\t\t\t\t\treadMessageContent:readMessageContent,\n");
      out.write("\t\t\t\t\t\t\tsignatureMessageTypes:signatureMessageTypes,\n");
      out.write("\t\t\t\t\t\t\tsignatureMessageContent:signatureMessageContent,\n");
      out.write("\t\t\t\t\t\t\tdisplayActorValue:displayInitiator,\n");
      out.write("\t\t\t\t\t\t\tautoSignatureActorType:autoSignatureInitiatorType,\n");
      out.write("\t\t\t\t\t\t\tautoSignatureActorValue:autoSignatureInitiator,\n");
      out.write("\t\t\t\t\t\t\tautoSignatureDisplayActorValue:autoSignatureDisplayInitiator,\n");
      out.write("\t\t\t\t\t\t\tautoReadActorType:autoReadInitiatorType,\n");
      out.write("\t\t\t\t\t\t\tautoReadActorValue:autoReadInitiator,\n");
      out.write("\t\t\t\t\t\t\tautoReadDisplayActorValue:autoReadDisplayInitiator,\n");
      out.write("\t\t\t\t\t\t\tactivityAction:activityAction,\n");
      out.write("\t\t\t\t\t\t\tattachmentType:attachmentType,\n");
      out.write("\t\t\t\t\t\t\tattachmentTypeIds:attachmentTypeIds,\n");
      out.write("\t\t\t\t\t\t\tformPath:formPath,\n");
      out.write("\t\t\t\t\t\t\tformTitle:formTitle,\n");
      out.write("\t\t\t\t\t\t\toperationButtons:submitButtons\t ,\n");
      out.write("\t\t\t\t\t\t\tisNeedAdvise:isNeedAdvise,\n");
      out.write("\t\t\t\t\t\t\tisAttachmentChecked:isAttachmentChecked,\n");
      out.write("\t\t\t\t\t\t\tisAutoActivity:isAutoActivity,\n");
      out.write("\t\t\t\t\t\t\tbackActivities:backRoutesNodes,\n");
      out.write("\t\t\t\t\t\t\tdealMethod:dealMethod,\n");
      out.write("\t\t\t\t\t\t\tpassedCount:passedCount\n");
      out.write("\t\t\t\t\t    };\n");
      out.write("\t\t\t\t\t\tajaxRequest({\n");
      out.write("\t\t\t\t  \t\t     url:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/jbpm/saveChangeToActivity.action',\n");
      out.write("\t\t\t\t  \t\t     method:'POST',\n");
      out.write("\t\t\t\t  \t\t     success:function(res){\n");
      out.write("\t\t\t\t\t  \t\t    getTracywindyObject('id_workflow_activity_detail_table').reload();\n");
      out.write("\t\t\t\t  \t\t    \tloadMask.hide();\n");
      out.write("\t\t\t\t  \t\t    \tjQuery(\"#id_workflow_activity_setting\").window(\"close\");\n");
      out.write("\t\t\t\t  \t\t     },\n");
      out.write("\t\t\t\t  \t\t     failure:function(res){loadMask.hide();},\n");
      out.write("\t\t\t\t  \t\t     params:params\n");
      out.write("\t\t\t\t\t\t }); \n");
      out.write("\t\t\t\t\t}\n");
      out.write("\t\t }\n");
      out.write("\t     function setDataChecks(buttonsValue,checkName){\n");
      out.write("\t    \t $(\"input[name='\"+checkName+\"']\").attr(\"checked\",false);\n");
      out.write("\t\t     if(buttonsValue)\n");
      out.write("\t\t     {\n");
      out.write("\t\t\t     var splitButtonsArr = buttonsValue.split(\",\");\n");
      out.write("\t\t\t     for(var i=0;i<splitButtonsArr.length;i++)\n");
      out.write("\t\t\t     {\n");
      out.write("\t\t\t    \t $(\"input[name='\"+checkName+\"'][value='\"+splitButtonsArr[i]+\"']\").attr(\"checked\",true);\n");
      out.write("\t\t\t\t }\n");
      out.write("\t\t\t }\n");
      out.write("\t     }\n");
      out.write("\t     function getDataChecks(checkName){\n");
      out.write("\t\t     var operationButtonsCheckBox = $(\"input[name='\"+checkName+\"']:checked\");\n");
      out.write("\t\t     var operationButionsArr = [];\n");
      out.write("\t\t     operationButtonsCheckBox.each(function(){\n");
      out.write("\t\t    \t operationButionsArr.push(this.value);\n");
      out.write("\t\t\t });\n");
      out.write("\t\t\t return operationButionsArr.join(\",\");\n");
      out.write("\t     }\n");
      out.write("\t     function setMessageTypes(buttonsValue){\n");
      out.write("\t    \t setDataChecks(buttonsValue,\"messageTypes\");\n");
      out.write("\t     }\n");
      out.write("\t     function getMessageTypes(){\n");
      out.write("\t    \t return getDataChecks(\"messageTypes\");\n");
      out.write("\t     }\n");
      out.write("\t     function setReadMessageTypes(buttonsValue){\n");
      out.write("\t    \t setDataChecks(buttonsValue,\"readMessageTypes\");\n");
      out.write("\t     }\n");
      out.write("\t     function getReadMessageTypes(){\n");
      out.write("\t    \t return getDataChecks(\"readMessageTypes\");\n");
      out.write("\t     }\n");
      out.write("\t     function setSignatureMessageTypes(buttonsValue){\n");
      out.write("\t    \t setDataChecks(buttonsValue,\"signatureMessageTypes\");\n");
      out.write("\t     }\n");
      out.write("\t     function getSignatureMessageTypes(){\n");
      out.write("\t    \t return getDataChecks(\"signatureMessageTypes\");\n");
      out.write("\t     }\n");
      out.write("\t     function setOperationButtons(buttonsValue)\n");
      out.write("\t     {\n");
      out.write("\t    \t setDataChecks(buttonsValue,\"submitButtons\");\n");
      out.write("\t    \t /*$(\"input[name='submitButtons']\").attr(\"checked\",false);\n");
      out.write("\t\t     if(buttonsValue)\n");
      out.write("\t\t     {\n");
      out.write("\t\t\t     var splitButtonsArr = buttonsValue.split(\",\");\n");
      out.write("\t\t\t     for(var i=0;i<splitButtonsArr.length;i++)\n");
      out.write("\t\t\t     {\n");
      out.write("\t\t\t    \t $(\"input[name='submitButtons'][value='\"+splitButtonsArr[i]+\"']\").attr(\"checked\",true);\n");
      out.write("\t\t\t\t }\n");
      out.write("\t\t\t }*/\n");
      out.write("\t\t }\n");
      out.write("\t     function getOperationButtons()\n");
      out.write("\t     {\n");
      out.write("\t    \t return getDataChecks(\"submitButtons\");\n");
      out.write("\t\t     /*var operationButtonsCheckBox = $(\"input[name='submitButtons']:checked\");\n");
      out.write("\t\t     var operationButionsArr = [];\n");
      out.write("\t\t     operationButtonsCheckBox.each(function(){\n");
      out.write("\t\t    \t operationButionsArr.push(this.value);\n");
      out.write("\t\t\t });\n");
      out.write("\t\t\t return operationButionsArr.join(\",\");*/\n");
      out.write("\t\t }\n");
      out.write("\t  </script>\n");
      out.write("<script type=\"text/javascript\">\n");
      out.write("\t\t//processDefinitionsDatas.sort(function(a,b){return a.processdefinitionkey>b.processdefinitionkey?1:-1;});\n");
      out.write("\t\t\n");
      out.write("\t\tvar processDefinitionsColumns = [ \n");
      out.write("\t\t\t{header:'流程图',  name:'diagram',width:60,align:'center',\n");
      out.write("\t            renderer:function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t       \t return '<a href=\"javascript:void(0);\" onclick=\"toProcessActivePicture(\\''+rowData.id+'\\',\\''+(-1)+'\\',\\''+rowData.maxdotx+'\\',\\''+rowData.maxdoty+'\\')\">查看</a>';\n");
      out.write("\t         }\n");
      out.write("\t        },\n");
      out.write("\t        {header:'流程设计',name:'operdesign',width:60,align:'center',renderer:function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t            var isDeployed = 'false';\n");
      out.write("\t            if(rowData.deployid)\n");
      out.write("\t            {\n");
      out.write("\t           \t isDeployed = 'true';\n");
      out.write("\t            }\n");
      out.write("\t       \t return '<a href=\"javascript:void(0);\" onclick=\"modifyWorkflow('+rowData.rowIndex+',\\''+isDeployed+'\\')\">设计</a>';\n");
      out.write("\t        }},\n");
      out.write("\t        {header:'流程发布',name:'operdeploy',align:\"left\",width:150,renderer:function(value,tableObj,columnName,columnIndex,rowData){\n");
      out.write("\t       \t var deploy = \"\";\n");
      out.write("\t            if(rowData.deployid)\n");
      out.write("\t            {\n");
      out.write("\t           \t deploy+= '<a href=\"javascript:void(0);\" onclick=\"removeDeploy('+rowData.rowIndex+')\">撤销发布</a>';\n");
      out.write("\t           \t deploy+='&nbsp;&nbsp;'+'<a href=\"javascript:void(0);\" onclick=\"workflowActivitiesSetting('+rowData.rowIndex+',\\''+rowData.deployid+'\\',\\''+rowData.processdefinitionid+'\\',\\''+rowData.maxdotx+'\\',\\''+rowData.maxdoty+'\\')\">设置</a>';\n");
      out.write("\t           \t //deploy+='<br/><a href=\"javascript:void(0);\" onclick=\"workflowInfoSetting('+rowData.rowIndex+',\\''+rowData.deployid+'\\',\\''+rowData.processdefinitionid+'\\')\">修改</a>';\n");
      out.write("\t           \t deploy+='&nbsp;&nbsp;'+'<a href=\"javascript:void(0);\" onclick=\"workflowKeySetting('+rowData.rowIndex+',\\''+rowData.deployid+'\\',\\''+rowData.processdefinitionid+'\\')\">关键字</a>';\n");
      out.write("\t           \t if(rowData.processdefinitiondeployedtime < rowData.processdefinitionupdatetime)\n");
      out.write("\t           \t {\n");
      out.write("\t           \t\t deploy+='<br/>&nbsp;&nbsp;'+'<a href=\"javascript:void(0);\" onclick=\"workflowSynchronized(\\''+rowData.deployid+'\\')\">流程同步</a>';\n");
      out.write("\t                }\n");
      out.write("\t           \t //deploy+='&nbsp;&nbsp;&nbsp;&nbsp;'+'<a href=\"javascript:void(0);\" onclick=\"startProcess(\\''+rowData.processdefinitionid+'\\')\">发起流程</a>';\n");
      out.write("\t            }\n");
      out.write("\t            else\n");
      out.write("\t            {\n");
      out.write("\t           \t deploy += '<a href=\"javascript:void(0);\" onclick=\"publishDeploy('+rowData.rowIndex+')\">发布</a>';\n");
      out.write("\t           \t deploy += '&nbsp;&nbsp;'+'<a href=\"javascript:void(0);\" onclick=\"removeDesignedWorkflow('+rowData.rowIndex+')\">删除</a>';\n");
      out.write("\t           \t deploy+='&nbsp;&nbsp;'+'<a href=\"javascript:void(0);\" onclick=\"workflowKeySetting('+rowData.rowIndex+',\\''+rowData.deployid+'\\',\\''+rowData.processdefinitionid+'\\')\">关键字</a>';\n");
      out.write("\t            }\n");
      out.write("\t       \t\treturn deploy;\n");
      out.write("\t      }},\n");
      out.write("\t     {header:'设计编号',name:'id',hidden:true},\n");
      out.write("\t     {header:'部署编号',name:'deployid',hidden:true},\n");
      out.write("\t     {header:'流程分类编号',name:'type',hidden:true},\n");
      out.write("\t     {header:'排序',name:'position',hidden:true},\n");
      out.write("\t     {header:'流程分类',name:'displaytype'},\n");
      out.write("\t     {header:'显示名称',name:'processdefinitiondisplayname',width:200},\n");
      out.write("\t     {header:'流程编号',name:'code'},\n");
      out.write("\t     {header:'流程名称',name:'processdefinitionkey',width:200},\n");
      out.write("\t     {header:'流程版本号',name:'processdefinitionversion',width:80},\n");
      out.write("\t     {header:'设计器版本',name:'processdefinitionjpdlversion',width:80},\n");
      out.write("\t     {header:'流程描述',name:'processdefinitiondescription',width:100},\n");
      out.write("\t     {header:'关键字段一',name:'keyone',width:150},\n");
      out.write("\t     {header:'关键字段二',name:'keytwo',width:150},\n");
      out.write("\t     {header:'关键字段三',name:'keythree',width:150},\n");
      out.write("\t     {header:'关键字段四',name:'keyfour',width:150},\n");
      out.write("\t     {header:'关键字段五',name:'keyfive',width:150},\n");
      out.write("\t     {header:'关键字段六',name:'keysix',width:150},\n");
      out.write("\t     {header:'关键字段七<font color=\"red\">(付款单号)</font>',name:'keyseven',width:150},\n");
      out.write("\t     {header:'关键字段八<font color=\"red\">(合同流水号)</font>',name:'keyeight',width:150},\n");
      out.write("\t     {header:'关键字段九<font color=\"red\">(项目立项流水号)</font>',name:'keynine',width:150},\n");
      out.write("\t     {header:'关键字段十<font color=\"red\">(互斥标识)</font>',name:'keyten',width:150}\n");
      out.write("     ];   \n");
      out.write("\tnew tracywindyTable({\n");
      out.write("\t\t\t\t  lockedNames:['diagram','operdesign','operdeploy'],\n");
      out.write("\t\t          renderTo:'id_processDefinitionsContainer',\n");
      out.write("\t\t          width:all_width-2,\n");
      out.write("\t\t          height:all_height,\n");
      out.write("\t\t          isCheck:false,\n");
      out.write("\t\t          isRank:true,\n");
      out.write("\t\t          pageSize:20,\n");
      out.write("\t\t          isExcel:false,\n");
      out.write("\t\t          title:'流程设计',\n");
      out.write("\t\t          tools:[{\n");
      out.write("\t            \t  isHtml:true,\n");
      out.write("\t            \t  html:'全局搜索：<input type=\"text\" style=\"margin-right:4px;border:1px solid #DDD;\" id=\"id_queryWorkflowsTableInput\" value=\"'+unescape(decodeURIComponent(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.queryText}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"))+'\" />'\n");
      out.write("\t\t            },'-',{\n");
      out.write("\t\t\t          html:'创建新流程',\n");
      out.write("\t\t        \t  iconCls:'icon-plus',\n");
      out.write("\t\t        \t  handler:function(){\n");
      out.write("\t\t        \t    createNewWorkflow();\n");
      out.write("\t\t        \t  }\n");
      out.write("\t\t\t      }],\n");
      out.write("\t\t\t      border:true,\n");
      out.write("\t\t\t      toolsLeftMargin:50,\n");
      out.write("\t\t          id:'id_workflows_table',\n");
      out.write("\t\t          showHeader:true,\n");
      out.write("\t\t          isPage:true,\n");
      out.write("\t\t          start:parseInt(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${empty param.pageStart ? 0 : param.pageStart }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"),\n");
      out.write("\t\t          params:{\n");
      out.write("\t\t\t\t\tqueryText:unescape(decodeURIComponent(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${param.queryText}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"))\n");
      out.write("                  },\n");
      out.write("                  xmlFileName:'/jbpm/queryAllDesignedWorkflows.xml',\n");
      out.write("\t\t          loadMode:'ajax',\n");
      out.write("\t\t          columns:processDefinitionsColumns,\n");
      out.write("\t\t\t\t  callBack:function(){\n");
      out.write("\t\t\t\t\tthis.setColumnHidden(true,'processdefinitionversion');\n");
      out.write("\t\t\t\t\tthis.setColumnHidden(true,'processdefinitionjpdlversion');\n");
      out.write("\t\t\t\t  }\n");
      out.write("\t\t       });\n");
      out.write("\t         jQuery(\"#id_queryWorkflowsTableInput\").keypress(function(e){\n");
      out.write("                 var code = e.keyCode||e.charCode;\n");
      out.write("                 if(13 == code){\n");
      out.write("                     var workflowsTable = getTracywindyTable(\"id_workflows_table\");\n");
      out.write("                     workflowsTable.setParams({\n");
      out.write("                            queryText:this.value.toUpperCase()\n");
      out.write("                     });\n");
      out.write("                     workflowsTable.reload();\n");
      out.write("                 }\n");
      out.write("\t         });\n");
      out.write("</script>\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
